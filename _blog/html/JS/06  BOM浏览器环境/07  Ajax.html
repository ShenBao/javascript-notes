<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>秋思浪人</title>
        
    <link rel="stylesheet" type="text/css" href="../../../static/css/main.css">
</head>
<body>
<div class="navbar navbar-line">
    <div class="container">
        <div class="logo">
            
                秋思浪人
            
        </div>
        <input type="checkbox" id="idoc_nav" />
        <div class="menu_tree">
        <ul><li><a href="../../../index.html">首页</a></li><li><a href="#"><span></span>Web</a><ul><li><a href="../../../html/Web/jade.html">jade</a></li><li><a href="../../../html/Web/less入门用法.html">less入门用法</a></li><li><a href="#"><span></span>web</a><ul><li><a href="../../../html/Web/web/01  概述.html">01  概述</a></li><li><a href="../../../html/Web/web/02  Canvas.html">02  Canvas</a></li><li><a href="../../../html/Web/web/03  SVG图像.html">03  SVG图像</a></li><li><a href="../../../html/Web/web/04  表单form.html">04  表单form</a></li><li><a href="../../../html/Web/web/05  file文件与二进制数据的操作.html">05  file文件与二进制数据的操作</a></li><li><a href="../../../html/Web/web/06  Web Worker.html">06  Web Worker</a></li><li><a href="../../../html/Web/web/07  SSE：服务器发送事件 eventsource.html">07  SSE：服务器发送事件 eventsource</a></li><li><a href="../../../html/Web/web/08  Page Visiblity.html">08  Page Visiblity</a></li><li><a href="../../../html/Web/web/09  FullScreen API：全屏操作.html">09  FullScreen API：全屏操作</a></li><li><a href="../../../html/Web/web/10  Web Speech.html">10  Web Speech</a></li><li><a href="../../../html/Web/web/11  requestAnimationFrame.html">11  requestAnimationFrame</a></li><li><a href="../../../html/Web/web/12  WebSocket.html">12  WebSocket</a></li><li><a href="../../../html/Web/web/13  WebRTC.html">13  WebRTC</a></li><li><a href="../../../html/Web/web/14  Web Components.html">14  Web Components</a></li></ul></li></ul></li><li><a href="#"><span></span>JS</a><ul><li><a href="../../../html/JS/00  JavaScript概述与发展史.html">00  JavaScript概述与发展史</a></li><li><a href="#"><span></span>01  语法</a><ul><li><a href="../../../html/JS/01  语法/01  基本语法.html">01  基本语法</a></li><li><a href="../../../html/JS/01  语法/02  数据类型.html">02  数据类型</a></li><li><a href="../../../html/JS/01  语法/03  数值 number.html">03  数值 number</a></li><li><a href="../../../html/JS/01  语法/04  字符串 string.html">04  字符串 string</a></li><li><a href="../../../html/JS/01  语法/05  对象 object.html">05  对象 object</a></li><li><a href="../../../html/JS/01  语法/06  数组 array.html">06  数组 array</a></li><li><a href="../../../html/JS/01  语法/07  函数 function.html">07  函数 function</a></li><li><a href="../../../html/JS/01  语法/08  运算符 operator.html">08  运算符 operator</a></li><li><a href="../../../html/JS/01  语法/09  数据类型转换 conversion.html">09  数据类型转换 conversion</a></li><li><a href="../../../html/JS/01  语法/10  错误处理机制 error.html">10  错误处理机制 error</a></li><li><a href="../../../html/JS/01  语法/11  编程风格.html">11  编程风格</a></li></ul></li><li><a href="#"><span></span>02  标准库</a><ul><li><a href="../../../html/JS/02  标准库/01  Object对象.html">01  Object对象</a></li><li><a href="../../../html/JS/02  标准库/02  Array对象.html">02  Array对象</a></li><li><a href="../../../html/JS/02  标准库/03  包装对象和Boolean对象.html">03  包装对象和Boolean对象</a></li><li><a href="../../../html/JS/02  标准库/04  Number对象.html">04  Number对象</a></li><li><a href="../../../html/JS/02  标准库/05  String对象.html">05  String对象</a></li><li><a href="../../../html/JS/02  标准库/06  Math对象.html">06  Math对象</a></li><li><a href="../../../html/JS/02  标准库/07  Date对象.html">07  Date对象</a></li><li><a href="../../../html/JS/02  标准库/08  RegExp对象.html">08  RegExp对象</a></li><li><a href="../../../html/JS/02  标准库/09  JSON对象.html">09  JSON对象</a></li><li><a href="../../../html/JS/02  标准库/10  console对象.html">10  console对象</a></li><li><a href="../../../html/JS/02  标准库/11  属性描述对象.html">11  属性描述对象</a></li><li><a href="../../../html/JS/02  标准库/12  二进制数组.html">12  二进制数组</a></li></ul></li><li><a href="#"><span></span>03  面向对象编程</a><ul><li><a href="../../../html/JS/03  面向对象编程/01  概述.html">01  概述</a></li><li><a href="../../../html/JS/03  面向对象编程/02  this 关键字.html">02  this 关键字</a></li><li><a href="../../../html/JS/03  面向对象编程/03  prototype 对象.html">03  prototype 对象</a></li><li><a href="../../../html/JS/03  面向对象编程/04  Object 对象与继承.html">04  Object 对象与继承</a></li><li><a href="../../../html/JS/03  面向对象编程/05  面向对象编程的模式.html">05  面向对象编程的模式</a></li></ul></li><li><a href="#"><span></span>04  语法专题</a><ul><li><a href="../../../html/JS/04  语法专题/01  单线程模型.html">01  单线程模型</a></li><li><a href="../../../html/JS/04  语法专题/02  定时器 timer.html">02  定时器 timer</a></li><li><a href="../../../html/JS/04  语法专题/03  Promise.html">03  Promise</a></li><li><a href="../../../html/JS/04  语法专题/04  strict.html">04  strict</a></li><li><a href="../../../html/JS/04  语法专题/05  JavaScript与有限状态机.html">05  JavaScript与有限状态机</a></li><li><a href="../../../html/JS/04  语法专题/06  JavaScript解释器.html">06  JavaScript解释器</a></li><li><a href="../../../html/JS/04  语法专题/07  MVC框架与Backbone.js.html">07  MVC框架与Backbone.js</a></li><li><a href="../../../html/JS/04  语法专题/08  ECMAScript 6 介绍.html">08  ECMAScript 6 介绍</a></li></ul></li><li><a href="#"><span></span>05  DOM模型</a><ul><li><a href="../../../html/JS/05  DOM模型/01  DOM 模型概述.html">01  DOM 模型概述</a></li><li><a href="../../../html/JS/05  DOM模型/02  Document节点.html">02  Document节点</a></li><li><a href="../../../html/JS/05  DOM模型/03  Element节点.html">03  Element节点</a></li><li><a href="../../../html/JS/05  DOM模型/04  Attribute属性的操作.html">04  Attribute属性的操作</a></li><li><a href="../../../html/JS/05  DOM模型/05  Text节点和DocumentFragment节点.html">05  Text节点和DocumentFragment节点</a></li><li><a href="../../../html/JS/05  DOM模型/06  事件模型 event.html">06  事件模型 event</a></li><li><a href="../../../html/JS/05  DOM模型/07  事件类型 event-type.html">07  事件类型 event-type</a></li><li><a href="../../../html/JS/05  DOM模型/08  CSS操作.html">08  CSS操作</a></li><li><a href="../../../html/JS/05  DOM模型/09  Mutation Observer.html">09  Mutation Observer</a></li><li><a href="../../../html/JS/05  DOM模型/10  Image对象.html">10  Image对象</a></li></ul></li><li><a href="#"><span></span>06  BOM浏览器环境</a><ul><li><a href="../../../html/JS/06  BOM浏览器环境/01  BOM浏览器环境概述.html">01  BOM浏览器环境概述</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/02  window对象.html">02  window对象</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/03  History对象.html">03  History对象</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/04  Cookie.html">04  Cookie</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/05  Web Storage：浏览器端数据储存机制.html">05  Web Storage：浏览器端数据储存机制</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/06  同源政策.html">06  同源政策</a></li><li class="active"><a href="../../../html/JS/06  BOM浏览器环境/07  Ajax.html">07  Ajax</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/08  CORS.html">08  CORS</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/09  IndexedDB：浏览器端数据库.html">09  IndexedDB：浏览器端数据库</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/10  Web Notification API.html">10  Web Notification API</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/11  Performance API.html">11  Performance API</a></li><li><a href="../../../html/JS/06  BOM浏览器环境/12  mobile移动设备API.html">12  mobile移动设备API</a></li></ul></li><li><a href="#"><span></span>07  jQuery</a><ul><li><a href="../../../html/JS/07  jQuery/01  jQuery概述.html">01  jQuery概述</a></li><li><a href="../../../html/JS/07  jQuery/02  jQuery常用API.html">02  jQuery常用API</a></li><li><a href="../../../html/JS/07  jQuery/03  jQuery工具方法.html">03  jQuery工具方法</a></li><li><a href="../../../html/JS/07  jQuery/04  jQuery插件开发.html">04  jQuery插件开发</a></li><li><a href="../../../html/JS/07  jQuery/05  jQuery.Deferred对象.html">05  jQuery.Deferred对象</a></li><li><a href="../../../html/JS/07  jQuery/06  如何做到jQuery-free.html">06  如何做到jQuery-free</a></li><li><a href="../../../html/JS/07  jQuery/07  Jquery同步和异步.html">07  Jquery同步和异步</a></li></ul></li><li><a href="#"><span></span>08  webapp</a><ul><li><a href="../../../html/JS/08  webapp/01  cache.html">01  cache</a></li><li><a href="../../../html/JS/08  webapp/02  progressive.html">02  progressive</a></li><li><a href="../../../html/JS/08  webapp/03  serviceworker.html">03  serviceworker</a></li></ul></li><li><a href="#"><span></span>09  常用库</a><ul><li><a href="../../../html/JS/09  常用库/d3.html">d3</a></li><li><a href="../../../html/JS/09  常用库/datejs.html">datejs</a></li><li><a href="../../../html/JS/09  常用库/designpattern.html">designpattern</a></li><li><a href="../../../html/JS/09  常用库/modernizr.html">modernizr</a></li><li><a href="../../../html/JS/09  常用库/sorting.html">sorting</a></li><li><a href="../../../html/JS/09  常用库/underscore.html">underscore</a></li><li><a href="../../../html/JS/09  常用库/Backbone.js.html">Backbone.js</a></li><li><a href="../../../html/JS/09  常用库/api.html">api</a></li><li><a href="../../../html/JS/09  常用库/plugins.html">plugins</a></li></ul></li><li><a href="#"><span></span>10  tool 工具</a><ul><li><a href="../../../html/JS/10  tool 工具/Bower：客户端库管理工具.html">Bower：客户端库管理工具</a></li><li><a href="../../../html/JS/10  tool 工具/Browserify：浏览器加载Node.js模块.html">Browserify：浏览器加载Node.js模块</a></li><li><a href="../../../html/JS/10  tool 工具/Grunt：任务自动管理工具.html">Grunt：任务自动管理工具</a></li><li><a href="../../../html/JS/10  tool 工具/Gulp：任务自动管理工具.html">Gulp：任务自动管理工具</a></li><li><a href="../../../html/JS/10  tool 工具/JavaScript 程序测试.html">JavaScript 程序测试</a></li><li><a href="../../../html/JS/10  tool 工具/Lint 工具.html">Lint 工具</a></li><li><a href="../../../html/JS/10  tool 工具/RequireJS和AMD规范.html">RequireJS和AMD规范</a></li><li><a href="../../../html/JS/10  tool 工具/Source Map.html">Source Map</a></li><li><a href="../../../html/JS/10  tool 工具/phantomjs.html">phantomjs</a></li></ul></li><li><a href="#"><span></span>11  常用积累</a><ul><li><a href="../../../html/JS/11  常用积累/DOM深入.html">DOM深入</a></li><li><a href="../../../html/JS/11  常用积累/JS盒子模型.html">JS盒子模型</a></li><li><a href="../../../html/JS/11  常用积累/promise.html">promise</a></li><li><a href="../../../html/JS/11  常用积累/webstorage.html">webstorage</a></li><li><a href="../../../html/JS/11  常用积累/原型链.html">原型链</a></li><li><a href="../../../html/JS/11  常用积累/字符编码.html">字符编码</a></li><li><a href="../../../html/JS/11  常用积累/正则表达式.html">正则表达式</a></li><li><a href="../../../html/JS/11  常用积累/预解析作用域闭包this.html">预解析作用域闭包this</a></li></ul></li></ul></li><li><a href="#"><span></span>ES6</a><ul><li><a href="../../../html/ES6/00  A.快速搞定常用的ES6新特性.html">00  A.快速搞定常用的ES6新特性</a></li><li><a href="../../../html/ES6/01  ECMAScript 6简介.html">01  ECMAScript 6简介</a></li><li><a href="../../../html/ES6/02  let和const命令.html">02  let和const命令</a></li><li><a href="../../../html/ES6/03  变量的解构赋值.html">03  变量的解构赋值</a></li><li><a href="../../../html/ES6/04  字符串的扩展.html">04  字符串的扩展</a></li><li><a href="../../../html/ES6/05  正则的扩展.html">05  正则的扩展</a></li><li><a href="../../../html/ES6/06  数值的扩展.html">06  数值的扩展</a></li><li><a href="../../../html/ES6/07  数组的扩展.html">07  数组的扩展</a></li><li><a href="../../../html/ES6/08  函数的扩展.html">08  函数的扩展</a></li><li><a href="../../../html/ES6/09  函数的扩展.html">09  函数的扩展</a></li><li><a href="../../../html/ES6/10  Symbol.html">10  Symbol</a></li><li><a href="../../../html/ES6/11  Set和Map数据结构.html">11  Set和Map数据结构</a></li><li><a href="../../../html/ES6/12  Proxy.html">12  Proxy</a></li><li><a href="../../../html/ES6/13  Reflect.html">13  Reflect</a></li><li><a href="../../../html/ES6/14  Iterator和for...of循环.html">14  Iterator和for...of循环</a></li><li><a href="../../../html/ES6/15  Generator 函数.html">15  Generator 函数</a></li><li><a href="../../../html/ES6/16  Promise对象.html">16  Promise对象</a></li><li><a href="../../../html/ES6/17  异步操作和Async函数.html">17  异步操作和Async函数</a></li><li><a href="../../../html/ES6/18  Class.html">18  Class</a></li><li><a href="../../../html/ES6/19  decorator 修饰器.html">19  decorator 修饰器</a></li><li><a href="../../../html/ES6/20  Module.html">20  Module</a></li><li><a href="../../../html/ES6/21  styles 编程风格.html">21  styles 编程风格</a></li><li><a href="../../../html/ES6/22  spec  读懂规格.html">22  spec  读懂规格</a></li><li><a href="../../../html/ES6/23  arraybuffer 二进制数组.html">23  arraybuffer 二进制数组</a></li><li><a href="../../../html/ES6/24  SIMD 单指令，多数据.html">24  SIMD 单指令，多数据</a></li><li><a href="../../../html/ES6/25  函数式编程.html">25  函数式编程</a></li><li><a href="../../../html/ES6/26  Mixin.html">26  Mixin</a></li><li><a href="../../../html/ES6/27  参考链接.html">27  参考链接</a></li></ul></li><li><a href="#"><span></span>React</a><ul><li><a href="../../../html/React/React基础知识.html">React基础知识</a></li><li><a href="../../../html/React/webpack搭配react入门及实践.html">webpack搭配react入门及实践</a></li><li><a href="../../../html/React/React中ES6与ES5构建差别及JSX的使用.html">React中ES6与ES5构建差别及JSX的使用</a></li><li><a href="../../../html/React/React API 汇总.html">React API 汇总</a></li></ul></li><li><a href="#"><span></span>RN</a><ul><li><a href="../../../html/RN/React-Native样式表指南.html">React-Native样式表指南</a></li></ul></li><li><a href="#"><span></span>Node</a><ul><li><a href="../../../html/Node/assert.html">assert</a></li><li><a href="../../../html/Node/basic.html">basic</a></li><li><a href="../../../html/Node/buffer.html">buffer</a></li><li><a href="../../../html/Node/child-process.html">child-process</a></li><li><a href="../../../html/Node/cluster.html">cluster</a></li><li><a href="../../../html/Node/develop.html">develop</a></li><li><a href="../../../html/Node/dns.html">dns</a></li><li><a href="../../../html/Node/error.html">error</a></li><li><a href="../../../html/Node/events.html">events</a></li><li><a href="../../../html/Node/express.html">express</a></li><li><a href="../../../html/Node/fs.html">fs</a></li><li><a href="../../../html/Node/http.html">http</a></li><li><a href="../../../html/Node/koa.html">koa</a></li><li><a href="../../../html/Node/module.html">module</a></li><li><a href="../../../html/Node/mongodb.html">mongodb</a></li><li><a href="../../../html/Node/net.html">net</a></li><li><a href="../../../html/Node/npm.html">npm</a></li><li><a href="../../../html/Node/os.html">os</a></li><li><a href="../../../html/Node/packagejson.html">packagejson</a></li><li><a href="../../../html/Node/path.html">path</a></li><li><a href="../../../html/Node/process.html">process</a></li><li><a href="../../../html/Node/querystring.html">querystring</a></li><li><a href="../../../html/Node/repl.html">repl</a></li><li><a href="../../../html/Node/stream.html">stream</a></li><li><a href="../../../html/Node/timer.html">timer</a></li><li><a href="../../../html/Node/url.html">url</a></li><li><a href="../../../html/Node/version.html">version</a></li><li><a href="#"><span></span>测试工具</a><ul><li><a href="../../../html/Node/测试工具/chai.html">chai</a></li><li><a href="../../../html/Node/测试工具/mocha.html">mocha</a></li><li><a href="../../../html/Node/测试工具/should.html">should</a></li></ul></li><li><a href="../../../html/Node/Nodejs教程.html">Nodejs教程</a></li></ul></li><li><a href="#"><span></span>工程化</a><ul><li><a href="../../../html/工程化/git.html">git</a></li><li><a href="../../../html/工程化/shell常用命令.html">shell常用命令</a></li><li><a href="../../../html/工程化/bash.html">bash</a></li><li><a href="../../../html/工程化/Git 常用命令大全.html">Git 常用命令大全</a></li><li><a href="../../../html/工程化/Shell命令大全.html">Shell命令大全</a></li><li><a href="../../../html/工程化/gulp-book.html">gulp-book</a></li><li><a href="../../../html/工程化/gulp.html">gulp</a></li><li><a href="../../../html/工程化/webpack.html">webpack</a></li><li><a href="../../../html/工程化/babel.html">babel</a></li><li><a href="../../../html/工程化/bower.html">bower</a></li></ul></li><li><a href="#"><span></span>Ng</a><ul><li><a href="../../../html/Ng/angular入门.html">angular入门</a></li><li><a href="../../../html/Ng/angular基础.html">angular基础</a></li><li><a href="../../../html/Ng/route.html">route</a></li><li><a href="../../../html/Ng/指令.html">指令</a></li><li><a href="../../../html/Ng/服务.html">服务</a></li></ul></li><li><a href="#"><span></span>Vue</a><ul><li><a href="../../../html/Vue/Vue入门.html">Vue入门</a></li><li><a href="../../../html/Vue/Vue方法篇.html">Vue方法篇</a></li><li><a href="../../../html/Vue/Vue方法篇2.html">Vue方法篇2</a></li><li><a href="../../../html/Vue/Vue组件.html">Vue组件</a></li></ul></li><li><a href="#"><span></span>经验</a><ul><li><a href="../../../html/经验/HTML CSS开发规范指南.html">HTML CSS开发规范指南</a></li><li><a href="../../../html/经验/JavaScript代码规范.html">JavaScript代码规范</a></li><li><a href="../../../html/经验/React编码规范.html">React编码规范</a></li><li><a href="../../../html/经验/移动前端开发经验指南.html">移动前端开发经验指南</a></li><li><a href="../../../html/经验/移动端上遇到的各种坑.html">移动端上遇到的各种坑</a></li><li><a href="../../../html/经验/H5项目常见问题及注意事项.html">H5项目常见问题及注意事项</a></li></ul></li><li><a href="#"><span></span>团队</a><ul><li><a href="../../../html/团队/笔试面试大纲.html">笔试面试大纲</a></li></ul></li><li><a href="#"><span></span>杂谈</a><ul><li><a href="../../../html/杂谈/杂谈  模块暂未开通.html">杂谈  模块暂未开通</a></li></ul></li><li><a href="../../../html/关于我.html">关于我</a></li></ul>    
        </div>
        
        
        <div class="forkgithub"><a target="_blank" href="https://github.com/ShenBao">fork on github</a></div>
        

        <section class="idoc_nav_btn">
            <label for="idoc_nav"><span></span></label>
        </section>
    </div>
    
</div>




<div class="container">

    <div class="page-toc">
        <ul><li><a href="#t0AJAX">AJAX</a><ul><li><a href="#t1XMLHttpRequest对象">XMLHttpRequest对象</a></li><li><a href="#t2XMLHttpRequest实例的属性">XMLHttpRequest实例的属性</a><ul><li><a href="#t3readyState">readyState</a></li><li><a href="#t4onreadystatechange">onreadystatechange</a></li><li><a href="#t5response">response</a></li><li><a href="#t6responseType">responseType</a></li><li><a href="#t7responseText">responseText</a></li><li><a href="#t8responseXML">responseXML</a></li><li><a href="#t9status">status</a></li><li><a href="#t10statusText">statusText</a></li><li><a href="#t11timeout">timeout</a></li><li><a href="#t12事件监听接口">事件监听接口</a></li><li><a href="#t13withCredentials">withCredentials</a></li></ul></li><li><a href="#t14XMLHttpRequest实例的方法">XMLHttpRequest实例的方法</a><ul><li><a href="#t15abort()">abort()</a></li><li><a href="#t16getAllResponseHeaders()">getAllResponseHeaders()</a></li><li><a href="#t17getResponseHeader()">getResponseHeader()</a></li><li><a href="#t18open()">open()</a></li><li><a href="#t19send()">send()</a></li><li><a href="#t20setRequestHeader()">setRequestHeader()</a></li><li><a href="#t21overrideMimeType()">overrideMimeType()</a></li></ul></li><li><a href="#t22XMLHttpRequest实例的事件">XMLHttpRequest实例的事件</a><ul><li><a href="#t23readyStateChange事件">readyStateChange事件</a></li><li><a href="#t24progress事件">progress事件</a></li><li><a href="#t25load事件、error事件、abort事件">load事件、error事件、abort事件</a></li><li><a href="#t26loadend事件">loadend事件</a></li></ul></li><li><a href="#t27文件上传">文件上传</a></li><li><a href="#t28Fetch API">Fetch API</a><ul><li><a href="#t29基本用法">基本用法</a></li><li><a href="#t30stream数据流">stream数据流</a></li><li><a href="#t31fetch()">fetch()</a></li><li><a href="#t32Headers">Headers</a></li><li><a href="#t33Request对象">Request对象</a></li><li><a href="#t34Response">Response</a></li><li><a href="#t35body属性">body属性</a></li></ul></li><li><a href="#t36参考链接">参考链接</a></li></ul></li></ul>
    </div>
    
    <div class="content markdown-body">
        <h1 id="t0AJAX">AJAX <a href="#t0AJAX"> # </a></h1>
<p>&#x6D4F;&#x89C8;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#xFF0C;&#x91C7;&#x7528;HTTP&#x534F;&#x8BAE;&#x901A;&#x4FE1;&#x3002;&#x7528;&#x6237;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x5730;&#x5740;&#x680F;&#x952E;&#x5165;&#x4E00;&#x4E2A;&#x7F51;&#x5740;&#xFF0C;&#x6216;&#x8005;&#x901A;&#x8FC7;&#x7F51;&#x9875;&#x8868;&#x5355;&#x5411;&#x670D;&#x52A1;&#x5668;&#x63D0;&#x4EA4;&#x5185;&#x5BB9;&#xFF0C;&#x8FD9;&#x65F6;&#x6D4F;&#x89C8;&#x5668;&#x5C31;&#x4F1A;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x51FA;HTTP&#x8BF7;&#x6C42;&#x3002;</p>
<p>1999&#x5E74;&#xFF0C;&#x5FAE;&#x8F6F;&#x516C;&#x53F8;&#x53D1;&#x5E03;IE&#x6D4F;&#x89C8;&#x5668;5.0&#x7248;&#xFF0C;&#x7B2C;&#x4E00;&#x6B21;&#x5F15;&#x5165;&#x65B0;&#x529F;&#x80FD;&#xFF1A;&#x5141;&#x8BB8;JavaScript&#x811A;&#x672C;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x8D77;HTTP&#x8BF7;&#x6C42;&#x3002;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x5F53;&#x65F6;&#x5E76;&#x6CA1;&#x6709;&#x5F15;&#x8D77;&#x6CE8;&#x610F;&#xFF0C;&#x76F4;&#x5230;2004&#x5E74;Gmail&#x53D1;&#x5E03;&#x548C;2005&#x5E74;Google Map&#x53D1;&#x5E03;&#xFF0C;&#x624D;&#x5F15;&#x8D77;&#x5E7F;&#x6CDB;&#x91CD;&#x89C6;&#x3002;2005&#x5E74;2&#x6708;&#xFF0C;AJAX&#x8FD9;&#x4E2A;&#x8BCD;&#x7B2C;&#x4E00;&#x6B21;&#x6B63;&#x5F0F;&#x63D0;&#x51FA;&#xFF0C;&#x6307;&#x56F4;&#x7ED5;&#x8FD9;&#x4E2A;&#x529F;&#x80FD;&#x8FDB;&#x884C;&#x5F00;&#x53D1;&#x7684;&#x4E00;&#x6574;&#x5957;&#x505A;&#x6CD5;&#x3002;&#x4ECE;&#x6B64;&#xFF0C;AJAX&#x6210;&#x4E3A;&#x811A;&#x672C;&#x53D1;&#x8D77;HTTP&#x901A;&#x4FE1;&#x7684;&#x4EE3;&#x540D;&#x8BCD;&#xFF0C;W3C&#x4E5F;&#x5728;2006&#x5E74;&#x53D1;&#x5E03;&#x4E86;&#x5B83;&#x7684;&#x56FD;&#x9645;&#x6807;&#x51C6;&#x3002;</p>
<p>&#x5177;&#x4F53;&#x6765;&#x8BF4;&#xFF0C;AJAX&#x5305;&#x62EC;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;&#x6B65;&#x9AA4;&#x3002;</p>
<ol>
<li>&#x521B;&#x5EFA;AJAX&#x5BF9;&#x8C61;</li>
<li>&#x53D1;&#x51FA;HTTP&#x8BF7;&#x6C42;</li>
<li>&#x63A5;&#x6536;&#x670D;&#x52A1;&#x5668;&#x4F20;&#x56DE;&#x7684;&#x6570;&#x636E;</li>
<li>&#x66F4;&#x65B0;&#x7F51;&#x9875;&#x6570;&#x636E;</li>
</ol>
<p>&#x6982;&#x62EC;&#x8D77;&#x6765;&#xFF0C;&#x5C31;&#x662F;&#x4E00;&#x53E5;&#x8BDD;&#xFF0C;AJAX&#x901A;&#x8FC7;&#x539F;&#x751F;&#x7684;<code>XMLHttpRequest</code>&#x5BF9;&#x8C61;&#x53D1;&#x51FA;HTTP&#x8BF7;&#x6C42;&#xFF0C;&#x5F97;&#x5230;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x540E;&#xFF0C;&#x518D;&#x8FDB;&#x884C;&#x5904;&#x7406;&#x3002;</p>
<p>AJAX&#x53EF;&#x4EE5;&#x662F;&#x540C;&#x6B65;&#x8BF7;&#x6C42;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;&#x3002;&#x4F46;&#x662F;&#xFF0C;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x7279;&#x6307;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;&#x3002;&#x56E0;&#x4E3A;&#x540C;&#x6B65;&#x7684;Ajax&#x8BF7;&#x6C42;&#xFF0C;&#x5BF9;&#x6D4F;&#x89C8;&#x5668;&#x6709;&#x201C;&#x5835;&#x585E;&#x6548;&#x5E94;&#x201D;&#x3002;</p>
<h2 id="t1XMLHttpRequest&#x5BF9;&#x8C61;">XMLHttpRequest&#x5BF9;&#x8C61; <a href="#t1XMLHttpRequest&#x5BF9;&#x8C61;"> # </a></h2>
<p><code>XMLHttpRequest</code>&#x5BF9;&#x8C61;&#x7528;&#x6765;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x4E0E;&#x670D;&#x52A1;&#x5668;&#x4E4B;&#x95F4;&#x4F20;&#x9001;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> ajax = <span class="hljs-keyword">new</span> XMLHttpRequest();
ajax.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;http://www.example.com/page.php&apos;</span>, <span class="hljs-literal">true</span>);
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5411;&#x6307;&#x5B9A;&#x7684;&#x670D;&#x52A1;&#x5668;&#x7F51;&#x5740;&#xFF0C;&#x53D1;&#x51FA;GET&#x8BF7;&#x6C42;&#x3002;</p>
<p>&#x7136;&#x540E;&#xFF0C;AJAX&#x6307;&#x5B9A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x76D1;&#x542C;&#x901A;&#x4FE1;&#x72B6;&#x6001;&#xFF08;<code>readyState</code>&#x5C5E;&#x6027;&#xFF09;&#x7684;&#x53D8;&#x5316;&#x3002;</p>
<pre><code class="lang-javascript">ajax.onreadystatechange = handleStateChange;
</code></pre>
<p>&#x4E00;&#x65E6;&#x62FF;&#x5230;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#xFF0C;AJAX&#x4E0D;&#x4F1A;&#x5237;&#x65B0;&#x6574;&#x4E2A;&#x7F51;&#x9875;&#xFF0C;&#x800C;&#x662F;&#x53EA;&#x66F4;&#x65B0;&#x76F8;&#x5173;&#x90E8;&#x5206;&#xFF0C;&#x4ECE;&#x800C;&#x4E0D;&#x6253;&#x65AD;&#x7528;&#x6237;&#x6B63;&#x5728;&#x505A;&#x7684;&#x4E8B;&#x60C5;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF0C;AJAX&#x53EA;&#x80FD;&#x5411;&#x540C;&#x6E90;&#x7F51;&#x5740;&#xFF08;&#x534F;&#x8BAE;&#x3001;&#x57DF;&#x540D;&#x3001;&#x7AEF;&#x53E3;&#x90FD;&#x76F8;&#x540C;&#xFF09;&#x53D1;&#x51FA;HTTP&#x8BF7;&#x6C42;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x51FA;&#x8DE8;&#x6E90;&#x8BF7;&#x6C42;&#xFF0C;&#x5C31;&#x4F1A;&#x62A5;&#x9519;&#xFF08;&#x8BE6;&#x89C1;&#x300A;&#x540C;&#x6E90;&#x653F;&#x7B56;&#x300B;&#x548C;&#x300A;CORS&#x673A;&#x5236;&#x300B;&#x4E24;&#x8282;&#xFF09;&#x3002;</p>
<p>&#x867D;&#x7136;&#x540D;&#x5B57;&#x91CC;&#x9762;&#x6709;<code>XML</code>&#xFF0C;&#x4F46;&#x662F;&#x5B9E;&#x9645;&#x4E0A;&#xFF0C;XMLHttpRequest&#x53EF;&#x4EE5;&#x62A5;&#x9001;&#x5404;&#x79CD;&#x6570;&#x636E;&#xFF0C;&#x5305;&#x62EC;&#x5B57;&#x7B26;&#x4E32;&#x548C;&#x4E8C;&#x8FDB;&#x5236;&#xFF0C;&#x800C;&#x4E14;&#x9664;&#x4E86;HTTP&#xFF0C;&#x5B83;&#x8FD8;&#x652F;&#x6301;&#x901A;&#x8FC7;&#x5176;&#x4ED6;&#x534F;&#x8BAE;&#x4F20;&#x9001;&#xFF08;&#x6BD4;&#x5982;File&#x548C;FTP&#xFF09;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;<code>XMLHttpRequest</code>&#x5BF9;&#x8C61;&#x7684;&#x5178;&#x578B;&#x7528;&#x6CD5;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();

<span class="hljs-comment">// &#x6307;&#x5B9A;&#x901A;&#x4FE1;&#x8FC7;&#x7A0B;&#x4E2D;&#x72B6;&#x6001;&#x6539;&#x53D8;&#x65F6;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;</span>
xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-comment">// &#x901A;&#x4FE1;&#x6210;&#x529F;&#x65F6;&#xFF0C;&#x72B6;&#x6001;&#x503C;&#x4E3A;4</span>
  <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>){
    <span class="hljs-keyword">if</span> (xhr.status === <span class="hljs-number">200</span>){
      <span class="hljs-built_in">console</span>.log(xhr.responseText);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-built_in">console</span>.error(xhr.statusText);
    }
  }
};

xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
  <span class="hljs-built_in">console</span>.error(xhr.statusText);
};

<span class="hljs-comment">// open&#x65B9;&#x5F0F;&#x7528;&#x4E8E;&#x6307;&#x5B9A;HTTP&#x52A8;&#x8BCD;&#x3001;&#x8BF7;&#x6C42;&#x7684;&#x7F51;&#x5740;&#x3001;&#x662F;&#x5426;&#x5F02;&#x6B65;</span>
xhr.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;/endpoint&apos;</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// &#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;</span>
xhr.send(<span class="hljs-literal">null</span>);
</code></pre>
<p><code>open</code>&#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x8868;&#x793A;&#x662F;&#x5426;&#x4E3A;&#x5F02;&#x6B65;&#x8BF7;&#x6C42;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x4E3A;<code>false</code>&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x8FD9;&#x4E2A;&#x8BF7;&#x6C42;&#x662F;&#x540C;&#x6B65;&#x7684;&#xFF0C;&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> XMLHttpRequest();
request.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;/bar/foo.txt&apos;</span>, <span class="hljs-literal">false</span>);
request.send(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">if</span> (request.status === <span class="hljs-number">200</span>) {
  <span class="hljs-built_in">console</span>.log(request.responseText);
}
</code></pre>
<h2 id="t2XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x5C5E;&#x6027;">XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x5C5E;&#x6027; <a href="#t2XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x5C5E;&#x6027;"> # </a></h2>
<h3 id="t3readyState">readyState <a href="#t3readyState"> # </a></h3>
<p><code>readyState</code>&#x662F;&#x4E00;&#x4E2A;&#x53EA;&#x8BFB;&#x5C5E;&#x6027;&#xFF0C;&#x7528;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x5E38;&#x91CF;&#xFF0C;&#x8868;&#x793A;XMLHttpRequest&#x8BF7;&#x6C42;&#x5F53;&#x524D;&#x6240;&#x5904;&#x7684;&#x72B6;&#x6001;&#x3002;</p>
<ul>
<li>0&#xFF0C;&#x5BF9;&#x5E94;&#x5E38;&#x91CF;<code>UNSENT</code>&#xFF0C;&#x8868;&#x793A;XMLHttpRequest&#x5B9E;&#x4F8B;&#x5DF2;&#x7ECF;&#x751F;&#x6210;&#xFF0C;&#x4F46;&#x662F;<code>open()</code>&#x65B9;&#x6CD5;&#x8FD8;&#x6CA1;&#x6709;&#x88AB;&#x8C03;&#x7528;&#x3002;</li>
<li>1&#xFF0C;&#x5BF9;&#x5E94;&#x5E38;&#x91CF;<code>OPENED</code>&#xFF0C;&#x8868;&#x793A;<code>send()</code>&#x65B9;&#x6CD5;&#x8FD8;&#x6CA1;&#x6709;&#x88AB;&#x8C03;&#x7528;&#xFF0C;&#x4ECD;&#x7136;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>setRequestHeader()</code>&#xFF0C;&#x8BBE;&#x5B9A;HTTP&#x8BF7;&#x6C42;&#x7684;&#x5934;&#x4FE1;&#x606F;&#x3002;</li>
<li>2&#xFF0C;&#x5BF9;&#x5E94;&#x5E38;&#x91CF;<code>HEADERS_RECEIVED</code>&#xFF0C;&#x8868;&#x793A;<code>send()</code>&#x65B9;&#x6CD5;&#x5DF2;&#x7ECF;&#x6267;&#x884C;&#xFF0C;&#x5E76;&#x4E14;&#x5934;&#x4FE1;&#x606F;&#x548C;&#x72B6;&#x6001;&#x7801;&#x5DF2;&#x7ECF;&#x6536;&#x5230;&#x3002;</li>
<li>3&#xFF0C;&#x5BF9;&#x5E94;&#x5E38;&#x91CF;<code>LOADING</code>&#xFF0C;&#x8868;&#x793A;&#x6B63;&#x5728;&#x63A5;&#x6536;&#x670D;&#x52A1;&#x5668;&#x4F20;&#x6765;&#x7684;body&#x90E8;&#x5206;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x5982;&#x679C;<code>responseType</code>&#x5C5E;&#x6027;&#x662F;<code>text</code>&#x6216;&#x8005;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;<code>responseText</code>&#x5C31;&#x4F1A;&#x5305;&#x542B;&#x5DF2;&#x7ECF;&#x6536;&#x5230;&#x7684;&#x90E8;&#x5206;&#x4FE1;&#x606F;&#x3002;</li>
<li>4&#xFF0C;&#x5BF9;&#x5E94;&#x5E38;&#x91CF;<code>DONE</code>&#xFF0C;&#x8868;&#x793A;&#x670D;&#x52A1;&#x5668;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x5B8C;&#x5168;&#x63A5;&#x6536;&#xFF0C;&#x6216;&#x8005;&#x672C;&#x6B21;&#x63A5;&#x6536;&#x5DF2;&#x7ECF;&#x5931;&#x8D25;&#x4E86;&#x3002;</li>
</ul>
<p>&#x5728;&#x901A;&#x4FE1;&#x8FC7;&#x7A0B;&#x4E2D;&#xFF0C;&#x6BCF;&#x5F53;&#x53D1;&#x751F;&#x72B6;&#x6001;&#x53D8;&#x5316;&#x7684;&#x65F6;&#x5019;&#xFF0C;<code>readyState</code>&#x5C5E;&#x6027;&#x7684;&#x503C;&#x5C31;&#x4F1A;&#x53D1;&#x751F;&#x6539;&#x53D8;&#x3002;&#x8FD9;&#x4E2A;&#x503C;&#x6BCF;&#x4E00;&#x6B21;&#x53D8;&#x5316;&#xFF0C;&#x90FD;&#x4F1A;&#x89E6;&#x53D1;<code>readyStateChange</code>&#x4E8B;&#x4EF6;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (ajax.readyState == <span class="hljs-number">4</span>) {
  <span class="hljs-comment">// Handle the response.</span>
} <span class="hljs-keyword">else</span> {
 <span class="hljs-comment">// Show the &apos;Loading...&apos; message or do nothing.</span>
}
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x8868;&#x793A;&#xFF0C;&#x53EA;&#x6709;<code>readyState</code>&#x53D8;&#x4E3A;4&#x65F6;&#xFF0C;&#x624D;&#x7B97;&#x786E;&#x8BA4;&#x8BF7;&#x6C42;&#x5DF2;&#x7ECF;&#x6210;&#x529F;&#xFF0C;&#x5176;&#x4ED6;&#x503C;&#x90FD;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x8FD8;&#x5728;&#x8FDB;&#x884C;&#x4E2D;&#x3002;</p>
<h3 id="t4onreadystatechange">onreadystatechange <a href="#t4onreadystatechange"> # </a></h3>
<p><code>onreadystatechange</code>&#x5C5E;&#x6027;&#x6307;&#x5411;&#x4E00;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5F53;<code>readystatechange</code>&#x4E8B;&#x4EF6;&#x53D1;&#x751F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8FD9;&#x4E2A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5C31;&#x4F1A;&#x8C03;&#x7528;&#xFF0C;&#x5E76;&#x4E14;XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;<code>readyState</code>&#x5C5E;&#x6027;&#x4E5F;&#x4F1A;&#x53D1;&#x751F;&#x53D8;&#x5316;&#x3002;</p>
<p>&#x53E6;&#x5916;&#xFF0C;&#x5982;&#x679C;&#x4F7F;&#x7528;<code>abort()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x7EC8;&#x6B62;XMLHttpRequest&#x8BF7;&#x6C42;&#xFF0C;<code>onreadystatechange</code>&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x4E5F;&#x4F1A;&#x88AB;&#x8C03;&#x7528;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> xmlhttp = <span class="hljs-keyword">new</span> XMLHttpRequest();
xmlhttp.open( <span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;http://example.com&apos;</span> , <span class="hljs-literal">true</span> );
xmlhttp.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> ( XMLHttpRequest.DONE != xmlhttp.readyState ) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">if</span> ( <span class="hljs-number">200</span> != xmlhttp.status ) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-built_in">console</span>.log( xmlhttp.responseText );
};
xmlhttp.send();
</code></pre>
<h3 id="t5response">response <a href="#t5response"> # </a></h3>
<p><code>response</code>&#x5C5E;&#x6027;&#x4E3A;&#x53EA;&#x8BFB;&#xFF0C;&#x8FD4;&#x56DE;&#x63A5;&#x6536;&#x5230;&#x7684;&#x6570;&#x636E;&#x4F53;&#xFF08;&#x5373;body&#x90E8;&#x5206;&#xFF09;&#x3002;&#x5B83;&#x7684;&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x662F;ArrayBuffer&#x3001;Blob&#x3001;Document&#x3001;JSON&#x5BF9;&#x8C61;&#x3001;&#x6216;&#x8005;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8FD9;&#x7531;<code>XMLHttpRequest.responseType</code>&#x5C5E;&#x6027;&#x7684;&#x503C;&#x51B3;&#x5B9A;&#x3002;</p>
<p>&#x5982;&#x679C;&#x672C;&#x6B21;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x6210;&#x529F;&#x6216;&#x8005;&#x6570;&#x636E;&#x4E0D;&#x5B8C;&#x6574;&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x5C31;&#x4F1A;&#x7B49;&#x4E8E;<code>null</code>&#x3002;</p>
<h3 id="t6responseType">responseType <a href="#t6responseType"> # </a></h3>
<p><code>responseType</code>&#x5C5E;&#x6027;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#xFF08;<code>xhr.response</code>&#xFF09;&#x7684;&#x7C7B;&#x578B;&#x3002;</p>
<ul>
<li>&quot;&quot;&#xFF1A;&#x5B57;&#x7B26;&#x4E32;&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#xFF09;</li>
<li>&quot;arraybuffer&quot;&#xFF1A;ArrayBuffer&#x5BF9;&#x8C61;</li>
<li>&quot;blob&quot;&#xFF1A;Blob&#x5BF9;&#x8C61;</li>
<li>&quot;document&quot;&#xFF1A;Document&#x5BF9;&#x8C61;</li>
<li>&quot;json&quot;&#xFF1A;JSON&#x5BF9;&#x8C61;</li>
<li>&quot;text&quot;&#xFF1A;&#x5B57;&#x7B26;&#x4E32;</li>
</ul>
<p>text&#x7C7B;&#x578B;&#x9002;&#x5408;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#xFF0C;&#x800C;&#x4E14;&#x76F4;&#x63A5;&#x5904;&#x7406;&#x6587;&#x672C;&#x4E5F;&#x6BD4;&#x8F83;&#x65B9;&#x4FBF;&#xFF0C;document&#x7C7B;&#x578B;&#x9002;&#x5408;&#x8FD4;&#x56DE;XML&#x6587;&#x6863;&#x7684;&#x60C5;&#x51B5;&#xFF0C;blob&#x7C7B;&#x578B;&#x9002;&#x5408;&#x8BFB;&#x53D6;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#xFF0C;&#x6BD4;&#x5982;&#x56FE;&#x7247;&#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
xhr.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;/path/to/image.png&apos;</span>, <span class="hljs-literal">true</span>);
xhr.responseType = <span class="hljs-string">&apos;blob&apos;</span>;

xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.status == <span class="hljs-number">200</span>) {
    <span class="hljs-keyword">var</span> blob = <span class="hljs-keyword">new</span> Blob([<span class="hljs-keyword">this</span>.response], {type: <span class="hljs-string">&apos;image/png&apos;</span>});
    <span class="hljs-comment">// &#x6216;&#x8005;</span>
    <span class="hljs-keyword">var</span> blob = oReq.response;
  }
};

xhr.send();
</code></pre>
<p>&#x5982;&#x679C;&#x5C06;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x8BBE;&#x4E3A;ArrayBuffer&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x6309;&#x7167;&#x6570;&#x7EC4;&#x7684;&#x65B9;&#x5F0F;&#x5904;&#x7406;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
xhr.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;/path/to/image.png&apos;</span>, <span class="hljs-literal">true</span>);
xhr.responseType = <span class="hljs-string">&apos;arraybuffer&apos;</span>;

xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">var</span> uInt8Array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>(<span class="hljs-keyword">this</span>.response);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = binStr.length; i &lt; len; ++i) {
  <span class="hljs-comment">// var byte = uInt8Array[i];</span>
  }
};

xhr.send();
</code></pre>
<p>&#x5982;&#x679C;&#x5C06;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x8BBE;&#x4E3A;&#x201C;json&#x201D;&#xFF0C;&#x652F;&#x6301;JSON&#x7684;&#x6D4F;&#x89C8;&#x5668;&#xFF08;Firefox&gt;9&#xFF0C;chrome&gt;30&#xFF09;&#xFF0C;&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x5BF9;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x8C03;&#x7528;<code>JSON.parse()</code>&#x65B9;&#x6CD5;&#x3002;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x4F60;&#x4ECE;xhr.response&#x5C5E;&#x6027;&#xFF08;&#x6CE8;&#x610F;&#xFF0C;&#x4E0D;&#x662F;xhr.responseText&#x5C5E;&#x6027;&#xFF09;&#x5F97;&#x5230;&#x7684;&#x4E0D;&#x662F;&#x6587;&#x672C;&#xFF0C;&#x800C;&#x662F;&#x4E00;&#x4E2A;JSON&#x5BF9;&#x8C61;&#x3002;</p>
<p>XHR2&#x652F;&#x6301;Ajax&#x7684;&#x8FD4;&#x56DE;&#x7C7B;&#x578B;&#x4E3A;&#x6587;&#x6863;&#xFF0C;&#x5373;xhr.responseType=&quot;document&quot; &#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740;&#xFF0C;&#x5BF9;&#x4E8E;&#x90A3;&#x4E9B;&#x6253;&#x5F00;CORS&#x7684;&#x7F51;&#x7AD9;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x7528;Ajax&#x6293;&#x53D6;&#x7F51;&#x9875;&#xFF0C;&#x7136;&#x540E;&#x4E0D;&#x7528;&#x89E3;&#x6790;HTML&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x76F4;&#x63A5;&#x5BF9;XHR&#x56DE;&#x5E94;&#x8FDB;&#x884C;DOM&#x64CD;&#x4F5C;&#x3002;</p>
<h3 id="t7responseText">responseText <a href="#t7responseText"> # </a></h3>
<p><code>responseText</code>&#x5C5E;&#x6027;&#x8FD4;&#x56DE;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x5230;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x4E3A;&#x53EA;&#x8BFB;&#x3002;&#x5982;&#x679C;&#x672C;&#x6B21;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x6210;&#x529F;&#x6216;&#x8005;&#x6570;&#x636E;&#x4E0D;&#x5B8C;&#x6574;&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x5C31;&#x4F1A;&#x7B49;&#x4E8E;<code>null</code>&#x3002;</p>
<p>&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x683C;&#x5F0F;&#x662F;JSON&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>responseText</code>&#x5C5E;&#x6027;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> data = ajax.responseText;
data = <span class="hljs-built_in">JSON</span>.parse(data);
</code></pre>
<h3 id="t8responseXML">responseXML <a href="#t8responseXML"> # </a></h3>
<p><code>responseXML</code>&#x5C5E;&#x6027;&#x8FD4;&#x56DE;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x6536;&#x5230;&#x7684;Document&#x5BF9;&#x8C61;&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x4E3A;&#x53EA;&#x8BFB;&#x3002;&#x5982;&#x679C;&#x672C;&#x6B21;&#x8BF7;&#x6C42;&#x6CA1;&#x6709;&#x6210;&#x529F;&#xFF0C;&#x6216;&#x8005;&#x6570;&#x636E;&#x4E0D;&#x5B8C;&#x6574;&#xFF0C;&#x6216;&#x8005;&#x4E0D;&#x80FD;&#x88AB;&#x89E3;&#x6790;&#x4E3A;XML&#x6216;HTML&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x7B49;&#x4E8E;<code>null</code>&#x3002;</p>
<p>&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x4F1A;&#x88AB;&#x76F4;&#x63A5;&#x89E3;&#x6790;&#x4E3A;DOM&#x5BF9;&#x8C61;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-comment">/* &#x8FD4;&#x56DE;&#x7684;XML&#x6587;&#x4EF6;&#x5982;&#x4E0B;
  &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; standalone=&quot;yes&quot; ?&gt;
  &lt;book&gt;
      &lt;chapter id=&quot;1&quot;&gt;(Re-)Introducing JavaScript&lt;/chapter&gt;
      &lt;chapter id=&quot;2&quot;&gt;JavaScript in Action&lt;/chapter&gt;
  &lt;/book&gt;
*/</span>

<span class="hljs-keyword">var</span> data = ajax.responseXML;
<span class="hljs-keyword">var</span> chapters = data.getElementsByTagName(<span class="hljs-string">&apos;chapter&apos;</span>);
</code></pre>
<p>&#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x6CA1;&#x6709;&#x660E;&#x793A;<code>Content-Type</code>&#x5934;&#x4FE1;&#x606F;&#x7B49;&#x4E8E;<code>text/xml</code>&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;<code>overrideMimeType()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x6307;&#x5B9A;XMLHttpRequest&#x5BF9;&#x8C61;&#x5C06;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#x89E3;&#x6790;&#x4E3A;XML&#x3002;</p>
<h3 id="t9status">status <a href="#t9status"> # </a></h3>
<p><code>status</code>&#x5C5E;&#x6027;&#x4E3A;&#x53EA;&#x8BFB;&#x5C5E;&#x6027;&#xFF0C;&#x8868;&#x793A;&#x672C;&#x6B21;&#x8BF7;&#x6C42;&#x6240;&#x5F97;&#x5230;&#x7684;HTTP&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x5B83;&#x662F;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#x3002;&#x4E00;&#x822C;&#x6765;&#x8BF4;&#xFF0C;&#x5982;&#x679C;&#x901A;&#x4FE1;&#x6210;&#x529F;&#x7684;&#x8BDD;&#xFF0C;&#x8FD9;&#x4E2A;&#x72B6;&#x6001;&#x7801;&#x662F;200&#x3002;</p>
<ul>
<li>200, OK&#xFF0C;&#x8BBF;&#x95EE;&#x6B63;&#x5E38;</li>
<li>301, Moved Permanently&#xFF0C;&#x6C38;&#x4E45;&#x79FB;&#x52A8;</li>
<li>302, Move temporarily&#xFF0C;&#x6682;&#x65F6;&#x79FB;&#x52A8;</li>
<li>304, Not Modified&#xFF0C;&#x672A;&#x4FEE;&#x6539;</li>
<li>307, Temporary Redirect&#xFF0C;&#x6682;&#x65F6;&#x91CD;&#x5B9A;&#x5411;</li>
<li>401, Unauthorized&#xFF0C;&#x672A;&#x6388;&#x6743;</li>
<li>403, Forbidden&#xFF0C;&#x7981;&#x6B62;&#x8BBF;&#x95EE;</li>
<li>404, Not Found&#xFF0C;&#x672A;&#x53D1;&#x73B0;&#x6307;&#x5B9A;&#x7F51;&#x5740;</li>
<li>500, Internal Server Error&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x751F;&#x9519;&#x8BEF;</li>
</ul>
<p>&#x57FA;&#x672C;&#x4E0A;&#xFF0C;&#x53EA;&#x6709;2xx&#x548C;304&#x7684;&#x72B6;&#x6001;&#x7801;&#xFF0C;&#x8868;&#x793A;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x662F;&#x6B63;&#x5E38;&#x72B6;&#x6001;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (ajax.readyState == <span class="hljs-number">4</span>) {
  <span class="hljs-keyword">if</span> ( (ajax.status &gt;= <span class="hljs-number">200</span> &amp;&amp; ajax.status &lt; <span class="hljs-number">300</span>)
    || (ajax.status == <span class="hljs-number">304</span>) ) {
    <span class="hljs-comment">// Handle the response.</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// Status error!</span>
  }
}
</code></pre>
<h3 id="t10statusText">statusText <a href="#t10statusText"> # </a></h3>
<p><code>statusText</code>&#x5C5E;&#x6027;&#x4E3A;&#x53EA;&#x8BFB;&#x5C5E;&#x6027;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8868;&#x793A;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x7684;&#x72B6;&#x6001;&#x63D0;&#x793A;&#x3002;&#x4E0D;&#x540C;&#x4E8E;<code>status</code>&#x5C5E;&#x6027;&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x5305;&#x542B;&#x6574;&#x4E2A;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x201D;200 OK&#x201C;&#x3002;</p>
<h3 id="t11timeout">timeout <a href="#t11timeout"> # </a></h3>
<p><code>timeout</code>&#x5C5E;&#x6027;&#x7B49;&#x4E8E;&#x4E00;&#x4E2A;&#x6574;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x591A;&#x5C11;&#x6BEB;&#x79D2;&#x540E;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x4ECD;&#x7136;&#x6CA1;&#x6709;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#xFF0C;&#x5C31;&#x4F1A;&#x81EA;&#x52A8;&#x7EC8;&#x6B62;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x5C5E;&#x6027;&#x7B49;&#x4E8E;0&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x6CA1;&#x6709;&#x65F6;&#x95F4;&#x9650;&#x5236;&#x3002;</p>
<pre><code class="lang-javascript">  <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
  xhr.ontimeout = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">&quot;The request for &quot;</span> + url + <span class="hljs-string">&quot; timed out.&quot;</span>);
  };
  xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (xhr.readyState === <span class="hljs-number">4</span>) {
      <span class="hljs-keyword">if</span> (xhr.status === <span class="hljs-number">200</span>) {
        callback.apply(xhr, args);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">console</span>.error(xhr.statusText);
      }
    }
  };
  xhr.open(<span class="hljs-string">&quot;GET&quot;</span>, url, <span class="hljs-literal">true</span>);
  xhr.timeout = timeout;
  xhr.send(<span class="hljs-literal">null</span>);
}
</code></pre>
<h3 id="t12&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x63A5;&#x53E3;">&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x63A5;&#x53E3; <a href="#t12&#x4E8B;&#x4EF6;&#x76D1;&#x542C;&#x63A5;&#x53E3;"> # </a></h3>
<p>XMLHttpRequest&#x7B2C;&#x4E00;&#x7248;&#xFF0C;&#x53EA;&#x80FD;&#x5BF9;<code>onreadystatechange</code>&#x8FD9;&#x4E00;&#x4E2A;&#x4E8B;&#x4EF6;&#x6307;&#x5B9A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;&#x8BE5;&#x4E8B;&#x4EF6;&#x5BF9;&#x6240;&#x6709;&#x60C5;&#x51B5;&#x4F5C;&#x51FA;&#x54CD;&#x5E94;&#x3002; XMLHttpRequest&#x7B2C;&#x4E8C;&#x7248;&#x5141;&#x8BB8;&#x5BF9;&#x66F4;&#x591A;&#x7684;&#x4E8B;&#x4EF6;&#x6307;&#x5B9A;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<ul>
<li>onloadstart &#x8BF7;&#x6C42;&#x53D1;&#x51FA;</li>
<li>onprogress &#x6B63;&#x5728;&#x53D1;&#x9001;&#x548C;&#x52A0;&#x8F7D;&#x6570;&#x636E;</li>
<li>onabort &#x8BF7;&#x6C42;&#x88AB;&#x4E2D;&#x6B62;&#xFF0C;&#x6BD4;&#x5982;&#x7528;&#x6237;&#x8C03;&#x7528;&#x4E86;<code>abort()</code>&#x65B9;&#x6CD5;</li>
<li>onerror &#x8BF7;&#x6C42;&#x5931;&#x8D25;</li>
<li>onload &#x8BF7;&#x6C42;&#x6210;&#x529F;&#x5B8C;&#x6210;</li>
<li>ontimeout &#x7528;&#x6237;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x9650;&#x5230;&#x671F;&#xFF0C;&#x8BF7;&#x6C42;&#x8FD8;&#x672A;&#x5B8C;&#x6210;</li>
<li>onloadend &#x8BF7;&#x6C42;&#x5B8C;&#x6210;&#xFF0C;&#x4E0D;&#x7BA1;&#x6210;&#x679C;&#x6216;&#x5931;&#x8D25;</li>
</ul>
<pre><code class="lang-javascript">xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
 <span class="hljs-keyword">var</span> responseText = xhr.responseText;
 <span class="hljs-built_in">console</span>.log(responseText);
 <span class="hljs-comment">// process the response.</span>
};

xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;There was an error!&apos;</span>);
};
</code></pre>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x5982;&#x679C;&#x53D1;&#x751F;&#x7F51;&#x7EDC;&#x9519;&#x8BEF;&#xFF08;&#x6BD4;&#x5982;&#x670D;&#x52A1;&#x5668;&#x65E0;&#x6CD5;&#x8FDE;&#x901A;&#xFF09;&#xFF0C;<code>onerror</code>&#x4E8B;&#x4EF6;&#x65E0;&#x6CD5;&#x83B7;&#x53D6;&#x62A5;&#x9519;&#x4FE1;&#x606F;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x663E;&#x793A;&#x62A5;&#x9519;&#x3002;</p>
<h3 id="t13withCredentials">withCredentials <a href="#t13withCredentials"> # </a></h3>
<p><code>withCredentials</code>&#x5C5E;&#x6027;&#x662F;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x8868;&#x793A;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x7528;&#x6237;&#x4FE1;&#x606F;&#xFF08;&#x6BD4;&#x5982;Cookie&#x548C;&#x8BA4;&#x8BC1;&#x7684;HTTP&#x5934;&#x4FE1;&#x606F;&#xFF09;&#x662F;&#x5426;&#x4F1A;&#x5305;&#x542B;&#x5728;&#x8BF7;&#x6C42;&#x4E4B;&#x4E2D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;<code>false</code>&#x3002;&#x5373;&#x5411;<code>example.com</code>&#x53D1;&#x51FA;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#x65F6;&#xFF0C;&#x4E0D;&#x4F1A;&#x53D1;&#x9001;<code>example.com</code>&#x8BBE;&#x7F6E;&#x5728;&#x672C;&#x673A;&#x4E0A;&#x7684;Cookie&#xFF08;&#x5982;&#x679C;&#x6709;&#x7684;&#x8BDD;&#xFF09;&#x3002;</p>
<p>&#x5982;&#x679C;&#x4F60;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x8DE8;&#x57DF;AJAX&#x53D1;&#x9001;Cookie&#xFF0C;&#x9700;&#x8981;&#x6253;&#x5F00;<code>withCredentials</code>&#x3002;</p>
<pre><code class="lang-javascript">xhr.withCredentials = <span class="hljs-literal">true</span>;
</code></pre>
<p>&#x4E3A;&#x4E86;&#x8BA9;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x751F;&#x6548;&#xFF0C;&#x670D;&#x52A1;&#x5668;&#x5FC5;&#x987B;&#x663E;&#x5F0F;&#x8FD4;&#x56DE;<code>Access-Control-Allow-Credentials</code>&#x8FD9;&#x4E2A;&#x5934;&#x4FE1;&#x606F;&#x3002;</p>
<pre><code class="lang-javascript">Access-Control-Allow-Credentials: <span class="hljs-literal">true</span>
</code></pre>
<p><code>.withCredentials</code>&#x5C5E;&#x6027;&#x6253;&#x5F00;&#x7684;&#x8BDD;&#xFF0C;&#x4E0D;&#x4EC5;&#x4F1A;&#x53D1;&#x9001;Cookie&#xFF0C;&#x8FD8;&#x4F1A;&#x8BBE;&#x7F6E;&#x8FDC;&#x7A0B;&#x4E3B;&#x673A;&#x6307;&#x5B9A;&#x7684;Cookie&#x3002;&#x6CE8;&#x610F;&#xFF0C;&#x6B64;&#x65F6;&#x4F60;&#x7684;&#x811A;&#x672C;&#x8FD8;&#x662F;&#x9075;&#x5B88;&#x540C;&#x6E90;&#x653F;&#x7B56;&#xFF0C;&#x65E0;&#x6CD5; &#x4ECE;<code>document.cookie</code>&#x6216;&#x8005;HTTP&#x56DE;&#x5E94;&#x7684;&#x5934;&#x4FE1;&#x606F;&#x4E4B;&#x4E2D;&#xFF0C;&#x8BFB;&#x53D6;&#x8FD9;&#x4E9B;Cookie&#x3002;</p>
<h2 id="t14XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x65B9;&#x6CD5;">XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x65B9;&#x6CD5; <a href="#t14XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x65B9;&#x6CD5;"> # </a></h2>
<h3 id="t15abort()">abort() <a href="#t15abort()"> # </a></h3>
<p><code>abort</code>&#x65B9;&#x6CD5;&#x7528;&#x6765;&#x7EC8;&#x6B62;&#x5DF2;&#x7ECF;&#x53D1;&#x51FA;&#x7684;HTTP&#x8BF7;&#x6C42;&#x3002;</p>
<pre><code class="lang-javascript">ajax.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;http://www.example.com/page.php&apos;</span>, <span class="hljs-literal">true</span>);
<span class="hljs-keyword">var</span> ajaxAbortTimer = setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">if</span> (ajax) {
    ajax.abort();
    ajax = <span class="hljs-literal">null</span>;
  }
}, <span class="hljs-number">5000</span>);
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5728;&#x53D1;&#x51FA;5&#x79D2;&#x4E4B;&#x540E;&#xFF0C;&#x7EC8;&#x6B62;&#x4E00;&#x4E2A;AJAX&#x8BF7;&#x6C42;&#x3002;</p>
<h3 id="t16getAllResponseHeaders()">getAllResponseHeaders() <a href="#t16getAllResponseHeaders()"> # </a></h3>
<p><code>getAllResponseHeaders</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x6765;&#x7684;&#x6240;&#x6709;HTTP&#x5934;&#x4FE1;&#x606F;&#x3002;&#x683C;&#x5F0F;&#x4E3A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6BCF;&#x4E2A;&#x5934;&#x4FE1;&#x606F;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;<code>CRLF</code>&#x5206;&#x9694;&#xFF0C;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x53D7;&#x5230;&#x670D;&#x52A1;&#x5668;&#x56DE;&#x5E94;&#xFF0C;&#x8BE5;&#x5C5E;&#x6027;&#x8FD4;&#x56DE;<code>null</code>&#x3002;</p>
<h3 id="t17getResponseHeader()">getResponseHeader() <a href="#t17getResponseHeader()"> # </a></h3>
<p><code>getResponseHeader</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;HTTP&#x5934;&#x4FE1;&#x606F;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x7684;&#x503C;&#xFF0C;&#x5982;&#x679C;&#x8FD8;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x670D;&#x52A1;&#x5668;&#x56DE;&#x5E94;&#x6216;&#x8005;&#x6307;&#x5B9A;&#x5B57;&#x6BB5;&#x4E0D;&#x5B58;&#x5728;&#xFF0C;&#x5219;&#x8BE5;&#x5C5E;&#x6027;&#x4E3A;<code>null</code>&#x3002;</p>
<pre><code class="lang-html">function getHeaderTime () {
  console.log(this.getResponseHeader(&quot;Last-Modified&quot;));
}

var oReq = new XMLHttpRequest();
oReq.open(&quot;HEAD&quot;, &quot;yourpage.html&quot;);
oReq.onload = getHeaderTime;
oReq.send();
</code></pre>
<p>&#x5982;&#x679C;&#x6709;&#x591A;&#x4E2A;&#x5B57;&#x6BB5;&#x540C;&#x540D;&#xFF0C;&#x5219;&#x5B83;&#x4EEC;&#x7684;&#x503C;&#x4F1A;&#x88AB;&#x8FDE;&#x63A5;&#x4E3A;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x6BCF;&#x4E2A;&#x5B57;&#x6BB5;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x201C;&#x9017;&#x53F7;+&#x7A7A;&#x683C;&#x201D;&#x5206;&#x9694;&#x3002;</p>
<h3 id="t18open()">open() <a href="#t18open()"> # </a></h3>
<p><code>XMLHttpRequest</code>&#x5BF9;&#x8C61;&#x7684;<code>open</code>&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x53D1;&#x9001;HTTP&#x8BF7;&#x6C42;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x683C;&#x5F0F;&#x5982;&#x4E0B;&#xFF0C;&#x4E00;&#x5171;&#x53EF;&#x4EE5;&#x63A5;&#x53D7;&#x4E94;&#x4E2A;&#x53C2;&#x6570;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">void</span> open(
   string method,
   string url,
   optional boolean <span class="hljs-keyword">async</span>,
   optional string user,
   optional string password
);
</code></pre>
<ul>
<li><code>method</code>&#xFF1A;&#x8868;&#x793A;HTTP&#x52A8;&#x8BCD;&#xFF0C;&#x6BD4;&#x5982;&#x201C;GET&#x201D;&#x3001;&#x201C;POST&#x201D;&#x3001;&#x201C;PUT&#x201D;&#x548C;&#x201C;DELETE&#x201D;&#x3002;</li>
<li><code>url</code>: &#x8868;&#x793A;&#x8BF7;&#x6C42;&#x53D1;&#x9001;&#x7684;&#x7F51;&#x5740;&#x3002;</li>
<li><code>async</code>: &#x683C;&#x5F0F;&#x4E3A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;<code>true</code>&#xFF0C;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x4E3A;&#x5F02;&#x6B65;&#x3002;&#x5982;&#x679C;&#x8BBE;&#x4E3A;<code>false</code>&#xFF0C;&#x5219;<code>send()</code>&#x65B9;&#x6CD5;&#x53EA;&#x6709;&#x7B49;&#x5230;&#x6536;&#x5230;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x624D;&#x4F1A;&#x6709;&#x8FD4;&#x56DE;&#x503C;&#x3002;</li>
<li><code>user</code>&#xFF1A;&#x8868;&#x793A;&#x7528;&#x4E8E;&#x8BA4;&#x8BC1;&#x7684;&#x7528;&#x6237;&#x540D;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
<li><code>password</code>&#xFF1A;&#x8868;&#x793A;&#x7528;&#x4E8E;&#x8BA4;&#x8BC1;&#x7684;&#x5BC6;&#x7801;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x3002;</li>
</ul>
<p>&#x5982;&#x679C;&#x5BF9;&#x4F7F;&#x7528;&#x8FC7;<code>open()</code>&#x65B9;&#x6CD5;&#x7684;&#x8BF7;&#x6C42;&#xFF0C;&#x518D;&#x6B21;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x7B49;&#x540C;&#x4E8E;&#x8C03;&#x7528;<code>abort()</code>&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x53D1;&#x9001;POST&#x8BF7;&#x6C42;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<pre><code class="lang-javascript">xhr.open(<span class="hljs-string">&apos;POST&apos;</span>, <span class="hljs-built_in">encodeURI</span>(<span class="hljs-string">&apos;someURL&apos;</span>));
xhr.setRequestHeader(<span class="hljs-string">&apos;Content-Type&apos;</span>, <span class="hljs-string">&apos;application/x-www-form-urlencoded&apos;</span>);
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{};
xhr.send(<span class="hljs-built_in">encodeURI</span>(<span class="hljs-string">&apos;dataString&apos;</span>));
</code></pre>
<p>&#x4E0A;&#x9762;&#x65B9;&#x6CD5;&#x4E2D;&#xFF0C;open&#x65B9;&#x6CD5;&#x5411;&#x6307;&#x5B9A;URL&#x53D1;&#x51FA;POST&#x8BF7;&#x6C42;&#xFF0C;send&#x65B9;&#x6CD5;&#x9001;&#x51FA;&#x5B9E;&#x9645;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x540C;&#x6B65;AJAX&#x8BF7;&#x6C42;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> XMLHttpRequest();
request.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;/bar/foo.txt&apos;</span>, <span class="hljs-literal">false</span>);
request.send(<span class="hljs-literal">null</span>);

<span class="hljs-keyword">if</span> (request.status === <span class="hljs-number">200</span>) {
  <span class="hljs-built_in">console</span>.log(request.responseText);
}
</code></pre>
<h3 id="t19send()">send() <a href="#t19send()"> # </a></h3>
<p><code>send</code>&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x5B9E;&#x9645;&#x53D1;&#x51FA;HTTP&#x8BF7;&#x6C42;&#x3002;&#x5982;&#x679C;&#x4E0D;&#x5E26;&#x53C2;&#x6570;&#xFF0C;&#x5C31;&#x8868;&#x793A;HTTP&#x8BF7;&#x6C42;&#x53EA;&#x5305;&#x542B;&#x5934;&#x4FE1;&#x606F;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x53EA;&#x6709;&#x4E00;&#x4E2A;URL&#xFF0C;&#x5178;&#x578B;&#x4F8B;&#x5B50;&#x5C31;&#x662F;GET&#x8BF7;&#x6C42;&#xFF1B;&#x5982;&#x679C;&#x5E26;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x5C31;&#x8868;&#x793A;&#x9664;&#x4E86;&#x5934;&#x4FE1;&#x606F;&#xFF0C;&#x8FD8;&#x5E26;&#x6709;&#x5305;&#x542B;&#x5177;&#x4F53;&#x6570;&#x636E;&#x7684;&#x4FE1;&#x606F;&#x4F53;&#xFF0C;&#x5178;&#x578B;&#x4F8B;&#x5B50;&#x5C31;&#x662F;POST&#x8BF7;&#x6C42;&#x3002;</p>
<pre><code class="lang-javascript">ajax.open(<span class="hljs-string">&apos;GET&apos;</span>
  , <span class="hljs-string">&apos;http://www.example.com/somepage.php?id=&apos;</span> + <span class="hljs-built_in">encodeURIComponent</span>(id)
  , <span class="hljs-literal">true</span>
);

<span class="hljs-comment">// &#x7B49;&#x540C;&#x4E8E;</span>
<span class="hljs-keyword">var</span> data = <span class="hljs-string">&apos;id=&apos;</span> + <span class="hljs-built_in">encodeURIComponent</span>(id));
ajax.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;http://www.example.com/somepage.php&apos;</span>, <span class="hljs-literal">true</span>);
ajax.send(data);
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;<code>GET</code>&#x8BF7;&#x6C42;&#x7684;&#x53C2;&#x6570;&#xFF0C;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x67E5;&#x8BE2;&#x5B57;&#x7B26;&#x4E32;&#x9644;&#x52A0;&#x5728;URL&#x540E;&#x9762;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;<code>send</code>&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x53D1;&#x9001;POST&#x8BF7;&#x6C42;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> data = <span class="hljs-string">&apos;email=&apos;</span>
  + <span class="hljs-built_in">encodeURIComponent</span>(email)
  + <span class="hljs-string">&apos;&amp;password=&apos;</span>
  + <span class="hljs-built_in">encodeURIComponent</span>(password);
ajax.open(<span class="hljs-string">&apos;POST&apos;</span>, <span class="hljs-string">&apos;http://www.example.com/somepage.php&apos;</span>, <span class="hljs-literal">true</span>);
ajax.setRequestHeader(<span class="hljs-string">&apos;Content-Type&apos;</span>, <span class="hljs-string">&apos;application/x-www-form-urlencoded&apos;</span>);
ajax.send(data);
</code></pre>
<p>&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x662F;&#x5F02;&#x6B65;&#x7684;&#xFF08;&#x9ED8;&#x8BA4;&#x4E3A;&#x5F02;&#x6B65;&#xFF09;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x5728;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x540E;&#x4F1A;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x3002;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x4E3A;&#x540C;&#x6B65;&#xFF0C;&#x8BE5;&#x65B9;&#x6CD5;&#x53EA;&#x6709;&#x7B49;&#x5230;&#x6536;&#x5230;&#x670D;&#x52A1;&#x5668;&#x56DE;&#x5E94;&#x540E;&#xFF0C;&#x624D;&#x4F1A;&#x8FD4;&#x56DE;&#x3002;</p>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x6240;&#x6709;XMLHttpRequest&#x7684;&#x76D1;&#x542C;&#x4E8B;&#x4EF6;&#xFF0C;&#x90FD;&#x5FC5;&#x987B;&#x5728;<code>send()</code>&#x65B9;&#x6CD5;&#x8C03;&#x7528;&#x4E4B;&#x524D;&#x8BBE;&#x5B9A;&#x3002;</p>
<p><code>send</code>&#x65B9;&#x6CD5;&#x7684;&#x53C2;&#x6570;&#x5C31;&#x662F;&#x53D1;&#x9001;&#x7684;&#x6570;&#x636E;&#x3002;&#x591A;&#x79CD;&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x4F5C;&#x4E3A;&#x5B83;&#x7684;&#x53C2;&#x6570;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">void</span> send();
<span class="hljs-keyword">void</span> send(ArrayBufferView data);
<span class="hljs-keyword">void</span> send(Blob data);
<span class="hljs-keyword">void</span> send(Document data);
<span class="hljs-keyword">void</span> send(<span class="hljs-built_in">String</span> data);
<span class="hljs-keyword">void</span> send(FormData data);
</code></pre>
<p>&#x5982;&#x679C;&#x53D1;&#x9001;<code>Document</code>&#x6570;&#x636E;&#xFF0C;&#x5728;&#x53D1;&#x9001;&#x4E4B;&#x524D;&#xFF0C;&#x6570;&#x636E;&#x4F1A;&#x5148;&#x88AB;&#x4E32;&#x884C;&#x5316;&#x3002;</p>
<p>&#x53D1;&#x9001;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#xFF0C;&#x6700;&#x597D;&#x4F7F;&#x7528;<code>ArrayBufferView</code>&#x6216;<code>Blob</code>&#x5BF9;&#x8C61;&#xFF0C;&#x8FD9;&#x4F7F;&#x5F97;&#x901A;&#x8FC7;Ajax&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x6210;&#x4E3A;&#x53EF;&#x80FD;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;&#x4E0A;&#x4F20;<code>ArrayBuffer</code>&#x5BF9;&#x8C61;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendArrayBuffer</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
  <span class="hljs-keyword">var</span> uInt8Array = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Uint8Array</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);

  xhr.open(<span class="hljs-string">&apos;POST&apos;</span>, <span class="hljs-string">&apos;/server&apos;</span>, <span class="hljs-literal">true</span>);
  xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ ... };
  xhr.send(uInt8Array.buffer);
}
</code></pre>
<p>FormData&#x7C7B;&#x578B;&#x53EF;&#x4EE5;&#x7528;&#x4E8E;&#x6784;&#x9020;&#x8868;&#x5355;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> formData = <span class="hljs-keyword">new</span> FormData();

formData.append(<span class="hljs-string">&apos;username&apos;</span>, <span class="hljs-string">&apos;&#x5F20;&#x4E09;&apos;</span>);
formData.append(<span class="hljs-string">&apos;email&apos;</span>, <span class="hljs-string">&apos;zhangsan@example.com&apos;</span>);
formData.append(<span class="hljs-string">&apos;birthDate&apos;</span>, <span class="hljs-number">1940</span>);

<span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
xhr.open(<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;/register&quot;</span>);
xhr.send(formData);
</code></pre>
<p>&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x4E2A;<code>formData</code>&#x5BF9;&#x8C61;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;send&#x65B9;&#x6CD5;&#x53D1;&#x9001;&#x3002;&#x5B83;&#x7684;&#x6548;&#x679C;&#x4E0E;&#x70B9;&#x51FB;&#x4E0B;&#x9762;&#x8868;&#x5355;&#x7684;submit&#x6309;&#x94AE;&#x662F;&#x4E00;&#x6837;&#x7684;&#x3002;</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&apos;registration&apos;</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&apos;registration&apos;</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&apos;/register&apos;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&apos;text&apos;</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&apos;username&apos;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&apos;&#x5F20;&#x4E09;&apos;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&apos;email&apos;</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&apos;email&apos;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&apos;zhangsan@example.com&apos;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&apos;number&apos;</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&apos;birthDate&apos;</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">&apos;1940&apos;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&apos;submit&apos;</span> <span class="hljs-attribute">onclick</span>=<span class="hljs-value">&apos;return sendForm(this.form);&apos;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<p>FormData&#x4E5F;&#x53EF;&#x4EE5;&#x5C06;&#x73B0;&#x6709;&#x8868;&#x5355;&#x6784;&#x9020;&#x751F;&#x6210;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> formElement = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&quot;form&quot;</span>);
<span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> XMLHttpRequest();
request.open(<span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-string">&quot;submitform.php&quot;</span>);
request.send(<span class="hljs-keyword">new</span> FormData(formElement));
</code></pre>
<p>FormData&#x5BF9;&#x8C61;&#x8FD8;&#x53EF;&#x4EE5;&#x5BF9;&#x73B0;&#x6709;&#x8868;&#x5355;&#x6DFB;&#x52A0;&#x6570;&#x636E;&#xFF0C;&#x8FD9;&#x4E3A;&#x6211;&#x4EEC;&#x64CD;&#x4F5C;&#x8868;&#x5355;&#x63D0;&#x4F9B;&#x4E86;&#x6781;&#x5927;&#x7684;&#x7075;&#x6D3B;&#x6027;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendForm</span>(<span class="hljs-params">form</span>) </span>{
    <span class="hljs-keyword">var</span> formData = <span class="hljs-keyword">new</span> FormData(form);
    formData.append(<span class="hljs-string">&apos;csrf&apos;</span>, <span class="hljs-string">&apos;e69a18d7db1286040586e6da1950128c&apos;</span>);

    <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
    xhr.open(<span class="hljs-string">&apos;POST&apos;</span>, form.action, <span class="hljs-literal">true</span>);
    xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
        <span class="hljs-comment">// ...</span>
    };
    xhr.send(formData);

    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-keyword">var</span> form = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;#registration&apos;</span>);
sendForm(form);
</code></pre>
<p>FormData&#x5BF9;&#x8C61;&#x4E5F;&#x80FD;&#x7528;&#x6765;&#x6A21;&#x62DF;File&#x63A7;&#x4EF6;&#xFF0C;&#x8FDB;&#x884C;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uploadFiles</span>(<span class="hljs-params">url, files</span>) </span>{
  <span class="hljs-keyword">var</span> formData = <span class="hljs-keyword">new</span> FormData();

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, file; file = files[i]; ++i) {
    formData.append(file.name, file); <span class="hljs-comment">// &#x53EF;&#x52A0;&#x5165;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x6587;&#x4EF6;&#x540D;</span>
  }

  <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
  xhr.open(<span class="hljs-string">&apos;POST&apos;</span>, url, <span class="hljs-literal">true</span>);
  xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ ... };

  xhr.send(formData);  <span class="hljs-comment">// multipart/form-data</span>
}

<span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;input[type=&quot;file&quot;]&apos;</span>).addEventListener(<span class="hljs-string">&apos;change&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  uploadFiles(<span class="hljs-string">&apos;/server&apos;</span>, <span class="hljs-keyword">this</span>.files);
}, <span class="hljs-literal">false</span>);
</code></pre>
<p>FormData&#x4E5F;&#x53EF;&#x4EE5;&#x52A0;&#x5165;JavaScript&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// &#x6DFB;&#x52A0;JavaScript&#x751F;&#x6210;&#x7684;&#x6587;&#x4EF6;</span>
<span class="hljs-keyword">var</span> content = <span class="hljs-string">&apos;&lt;a id=&quot;a&quot;&gt;&lt;b id=&quot;b&quot;&gt;hey!&lt;/b&gt;&lt;/a&gt;&apos;</span>;
<span class="hljs-keyword">var</span> blob = <span class="hljs-keyword">new</span> Blob([content], { type: <span class="hljs-string">&quot;text/xml&quot;</span>});
formData.append(<span class="hljs-string">&quot;webmasterfile&quot;</span>, blob);
</code></pre>
<h3 id="t20setRequestHeader()">setRequestHeader() <a href="#t20setRequestHeader()"> # </a></h3>
<p><code>setRequestHeader</code>&#x65B9;&#x6CD5;&#x7528;&#x4E8E;&#x8BBE;&#x7F6E;HTTP&#x5934;&#x4FE1;&#x606F;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x5728;<code>open()</code>&#x4E4B;&#x540E;&#x3001;<code>send()</code>&#x4E4B;&#x524D;&#x8C03;&#x7528;&#x3002;&#x5982;&#x679C;&#x8BE5;&#x65B9;&#x6CD5;&#x591A;&#x6B21;&#x8C03;&#x7528;&#xFF0C;&#x8BBE;&#x5B9A;&#x540C;&#x4E00;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5219;&#x6BCF;&#x4E00;&#x6B21;&#x8C03;&#x7528;&#x7684;&#x503C;&#x4F1A;&#x88AB;&#x5408;&#x5E76;&#x6210;&#x4E00;&#x4E2A;&#x5355;&#x4E00;&#x7684;&#x503C;&#x53D1;&#x9001;&#x3002;</p>
<pre><code class="lang-javascript">xhr.setRequestHeader(<span class="hljs-string">&apos;Content-Type&apos;</span>, <span class="hljs-string">&apos;application/json&apos;</span>);
xhr.setRequestHeader(<span class="hljs-string">&apos;Content-Length&apos;</span>, <span class="hljs-built_in">JSON</span>.stringify(data).length);
xhr.send(<span class="hljs-built_in">JSON</span>.stringify(data));
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x9996;&#x5148;&#x8BBE;&#x7F6E;&#x5934;&#x4FE1;&#x606F;<code>Content-Type</code>&#xFF0C;&#x8868;&#x793A;&#x53D1;&#x9001;JSON&#x683C;&#x5F0F;&#x7684;&#x6570;&#x636E;&#xFF1B;&#x7136;&#x540E;&#x8BBE;&#x7F6E;<code>Content-Length</code>&#xFF0C;&#x8868;&#x793A;&#x6570;&#x636E;&#x957F;&#x5EA6;&#xFF1B;&#x6700;&#x540E;&#x53D1;&#x9001;JSON&#x6570;&#x636E;&#x3002;</p>
<h3 id="t21overrideMimeType()">overrideMimeType() <a href="#t21overrideMimeType()"> # </a></h3>
<p>&#x8BE5;&#x65B9;&#x6CD5;&#x7528;&#x6765;&#x6307;&#x5B9A;&#x670D;&#x52A1;&#x5668;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x7684;MIME&#x7C7B;&#x578B;&#x3002;&#x8BE5;&#x65B9;&#x6CD5;&#x5FC5;&#x987B;&#x5728;<code>send()</code>&#x4E4B;&#x524D;&#x8C03;&#x7528;&#x3002;</p>
<p>&#x4F20;&#x7EDF;&#x4E0A;&#xFF0C;&#x5982;&#x679C;&#x5E0C;&#x671B;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x53D6;&#x56DE;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#xFF0C;&#x5C31;&#x8981;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x65B9;&#x6CD5;&#xFF0C;&#x4EBA;&#x4E3A;&#x5C06;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x4F2A;&#x88C5;&#x6210;&#x6587;&#x672C;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
xhr.open(<span class="hljs-string">&apos;GET&apos;</span>, <span class="hljs-string">&apos;/path/to/image.png&apos;</span>, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// &#x5F3A;&#x5236;&#x5C06;MIME&#x6539;&#x4E3A;&#x6587;&#x672C;&#x7C7B;&#x578B;</span>
xhr.overrideMimeType(<span class="hljs-string">&apos;text/plain; charset=x-user-defined&apos;</span>);

xhr.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.readyState == <span class="hljs-number">4</span> &amp;&amp; <span class="hljs-keyword">this</span>.status == <span class="hljs-number">200</span>) {
    <span class="hljs-keyword">var</span> binStr = <span class="hljs-keyword">this</span>.responseText;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, len = binStr.length; i &lt; len; ++i) {
      <span class="hljs-keyword">var</span> c = binStr.charCodeAt(i);
      <span class="hljs-keyword">var</span> byte = c &amp; <span class="hljs-number">0xff</span>;  <span class="hljs-comment">// &#x53BB;&#x9664;&#x9AD8;&#x4F4D;&#x5B57;&#x8282;&#xFF0C;&#x7559;&#x4E0B;&#x4F4E;&#x4F4D;&#x5B57;&#x8282;</span>
    }
  }
};

xhr.send();
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x56E0;&#x4E3A;&#x4F20;&#x56DE;&#x6765;&#x7684;&#x662F;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#xFF0C;&#x9996;&#x5148;&#x7528;<code>xhr.overrideMimeType</code>&#x65B9;&#x6CD5;&#x5F3A;&#x5236;&#x6539;&#x53D8;&#x5B83;&#x7684;MIME&#x7C7B;&#x578B;&#xFF0C;&#x4F2A;&#x88C5;&#x6210;&#x6587;&#x672C;&#x6570;&#x636E;&#x3002;&#x5B57;&#x7B26;&#x96C6;&#x5FC5;&#x9700;&#x6307;&#x5B9A;&#x4E3A;&#x201C;x-user-defined&#x201D;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x5176;&#x4ED6;&#x5B57;&#x7B26;&#x96C6;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x5185;&#x90E8;&#x4F1A;&#x5F3A;&#x5236;&#x8F6C;&#x7801;&#xFF0C;&#x5C06;&#x5176;&#x4FDD;&#x5B58;&#x6210;UTF-16&#x7684;&#x5F62;&#x5F0F;&#x3002;&#x5B57;&#x7B26;&#x96C6;&#x201C;x-user-defined&#x201D;&#x5176;&#x5B9E;&#x4E5F;&#x4F1A;&#x53D1;&#x751F;&#x8F6C;&#x7801;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x4F1A;&#x5728;&#x6BCF;&#x4E2A;&#x5B57;&#x8282;&#x524D;&#x9762;&#x518D;&#x52A0;&#x4E0A;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#xFF08;0xF700-0xF7ff&#xFF09;&#xFF0C;&#x56E0;&#x6B64;&#x540E;&#x9762;&#x8981;&#x5BF9;&#x6BCF;&#x4E2A;&#x5B57;&#x7B26;&#x8FDB;&#x884C;&#x4E00;&#x6B21;&#x4E0E;&#x8FD0;&#x7B97;&#xFF08;&amp;&#xFF09;&#xFF0C;&#x5C06;&#x9AD8;&#x4F4D;&#x7684;8&#x4E2A;&#x4F4D;&#x53BB;&#x9664;&#xFF0C;&#x53EA;&#x7559;&#x4E0B;&#x4F4E;&#x4F4D;&#x7684;8&#x4E2A;&#x4F4D;&#xFF0C;&#x7531;&#x6B64;&#x9010;&#x4E00;&#x8BFB;&#x51FA;&#x539F;&#x6587;&#x4EF6;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x636E;&#x7684;&#x6BCF;&#x4E2A;&#x5B57;&#x8282;&#x3002;</p>
<p>&#x8FD9;&#x79CD;&#x65B9;&#x6CD5;&#x5F88;&#x9EBB;&#x70E6;&#xFF0C;&#x5728;XMLHttpRequest&#x7248;&#x672C;&#x5347;&#x7EA7;&#x4EE5;&#x540E;&#xFF0C;&#x4E00;&#x822C;&#x91C7;&#x7528;&#x6307;&#x5B9A;<code>responseType</code>&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-keyword">var</span> arraybuffer = xhr.response;
  <span class="hljs-comment">// ...</span>
}
xhr.open(<span class="hljs-string">&quot;GET&quot;</span>, url);
xhr.responseType = <span class="hljs-string">&quot;arraybuffer&quot;</span>;
xhr.send();
</code></pre>
<h2 id="t22XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x4E8B;&#x4EF6;">XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x4E8B;&#x4EF6; <a href="#t22XMLHttpRequest&#x5B9E;&#x4F8B;&#x7684;&#x4E8B;&#x4EF6;"> # </a></h2>
<h3 id="t23readyStateChange&#x4E8B;&#x4EF6;">readyStateChange&#x4E8B;&#x4EF6; <a href="#t23readyStateChange&#x4E8B;&#x4EF6;"> # </a></h3>
<p><code>readyState</code>&#x5C5E;&#x6027;&#x7684;&#x503C;&#x53D1;&#x751F;&#x6539;&#x53D8;&#xFF0C;&#x5C31;&#x4F1A;&#x89E6;&#x53D1;readyStateChange&#x4E8B;&#x4EF6;&#x3002;</p>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;<code>onReadyStateChange</code>&#x5C5E;&#x6027;&#xFF0C;&#x6307;&#x5B9A;&#x8FD9;&#x4E2A;&#x4E8B;&#x4EF6;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5BF9;&#x4E0D;&#x540C;&#x72B6;&#x6001;&#x8FDB;&#x884C;&#x4E0D;&#x540C;&#x5904;&#x7406;&#x3002;&#x5C24;&#x5176;&#x662F;&#x5F53;&#x72B6;&#x6001;&#x53D8;&#x4E3A;4&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x8868;&#x793A;&#x901A;&#x4FE1;&#x6210;&#x529F;&#xFF0C;&#x8FD9;&#x65F6;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x5C31;&#x53EF;&#x4EE5;&#x5904;&#x7406;&#x670D;&#x52A1;&#x5668;&#x4F20;&#x9001;&#x56DE;&#x6765;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<h3 id="t24progress&#x4E8B;&#x4EF6;">progress&#x4E8B;&#x4EF6; <a href="#t24progress&#x4E8B;&#x4EF6;"> # </a></h3>
<p>&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x65F6;&#xFF0C;XMLHTTPRequest&#x5BF9;&#x8C61;&#x7684;upload&#x5C5E;&#x6027;&#x6709;&#x4E00;&#x4E2A;progress&#xFF0C;&#x4F1A;&#x4E0D;&#x65AD;&#x8FD4;&#x56DE;&#x4E0A;&#x4F20;&#x7684;&#x8FDB;&#x5EA6;&#x3002;</p>
<p>&#x5047;&#x5B9A;&#x7F51;&#x9875;&#x4E0A;&#x6709;&#x4E00;&#x4E2A;progress&#x5143;&#x7D20;&#x3002;</p>
<pre><code class="lang-http">&lt;progress min=&quot;0&quot; max=&quot;100&quot; value=&quot;0&quot;&gt;0% complete&lt;/progress&gt;
</code></pre>
<p>&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x65F6;&#xFF0C;&#x5BF9;upload&#x5C5E;&#x6027;&#x6307;&#x5B9A;progress&#x4E8B;&#x4EF6;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#xFF0C;&#x5373;&#x53EF;&#x83B7;&#x5F97;&#x4E0A;&#x4F20;&#x7684;&#x8FDB;&#x5EA6;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upload</span>(<span class="hljs-params">blobOrFile</span>) </span>{
  <span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
  xhr.open(<span class="hljs-string">&apos;POST&apos;</span>, <span class="hljs-string">&apos;/server&apos;</span>, <span class="hljs-literal">true</span>);
  xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{ ... };

  <span class="hljs-comment">// Listen to the upload progress.</span>
  <span class="hljs-keyword">var</span> progressBar = <span class="hljs-built_in">document</span>.querySelector(<span class="hljs-string">&apos;progress&apos;</span>);
  xhr.upload.onprogress = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">if</span> (e.lengthComputable) {
      progressBar.value = (e.loaded / e.total) * <span class="hljs-number">100</span>;
      progressBar.textContent = progressBar.value; <span class="hljs-comment">// Fallback for unsupported browsers.</span>
    }
  };

  xhr.send(blobOrFile);
}

upload(<span class="hljs-keyword">new</span> Blob([<span class="hljs-string">&apos;hello world&apos;</span>], {type: <span class="hljs-string">&apos;text/plain&apos;</span>}));
</code></pre>
<h3 id="t25load&#x4E8B;&#x4EF6;&#x3001;error&#x4E8B;&#x4EF6;&#x3001;abort&#x4E8B;&#x4EF6;">load&#x4E8B;&#x4EF6;&#x3001;error&#x4E8B;&#x4EF6;&#x3001;abort&#x4E8B;&#x4EF6; <a href="#t25load&#x4E8B;&#x4EF6;&#x3001;error&#x4E8B;&#x4EF6;&#x3001;abort&#x4E8B;&#x4EF6;"> # </a></h3>
<p>load&#x4E8B;&#x4EF6;&#x8868;&#x793A;&#x670D;&#x52A1;&#x5668;&#x4F20;&#x6765;&#x7684;&#x6570;&#x636E;&#x63A5;&#x6536;&#x5B8C;&#x6BD5;&#xFF0C;error&#x4E8B;&#x4EF6;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x51FA;&#x9519;&#xFF0C;abort&#x4E8B;&#x4EF6;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x88AB;&#x4E2D;&#x65AD;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();

xhr.addEventListener(<span class="hljs-string">&quot;progress&quot;</span>, updateProgress);
xhr.addEventListener(<span class="hljs-string">&quot;load&quot;</span>, transferComplete);
xhr.addEventListener(<span class="hljs-string">&quot;error&quot;</span>, transferFailed);
xhr.addEventListener(<span class="hljs-string">&quot;abort&quot;</span>, transferCanceled);

xhr.open();

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateProgress</span> (<span class="hljs-params">oEvent</span>) </span>{
  <span class="hljs-keyword">if</span> (oEvent.lengthComputable) {
    <span class="hljs-keyword">var</span> percentComplete = oEvent.loaded / oEvent.total;
    <span class="hljs-comment">// ...</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// &#x56DE;&#x5E94;&#x7684;&#x603B;&#x6570;&#x636E;&#x91CF;&#x672A;&#x77E5;&#xFF0C;&#x5BFC;&#x81F4;&#x65E0;&#x6CD5;&#x8BA1;&#x7B97;&#x767E;&#x5206;&#x6BD4;</span>
  }
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transferComplete</span>(<span class="hljs-params">evt</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;The transfer is complete.&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transferFailed</span>(<span class="hljs-params">evt</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;An error occurred while transferring the file.&quot;</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transferCanceled</span>(<span class="hljs-params">evt</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;The transfer has been canceled by the user.&quot;</span>);
}
</code></pre>
<h3 id="t26loadend&#x4E8B;&#x4EF6;">loadend&#x4E8B;&#x4EF6; <a href="#t26loadend&#x4E8B;&#x4EF6;"> # </a></h3>
<p><code>abort</code>&#x3001;<code>load</code>&#x548C;<code>error</code>&#x8FD9;&#x4E09;&#x4E2A;&#x4E8B;&#x4EF6;&#xFF0C;&#x4F1A;&#x4F34;&#x968F;&#x4E00;&#x4E2A;<code>loadend</code>&#x4E8B;&#x4EF6;&#xFF0C;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7ED3;&#x675F;&#xFF0C;&#x4F46;&#x4E0D;&#x77E5;&#x9053;&#x5176;&#x662F;&#x5426;&#x6210;&#x529F;&#x3002;</p>
<pre><code class="lang-javascript">req.addEventListener(<span class="hljs-string">&quot;loadend&quot;</span>, loadEnd);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadEnd</span>(<span class="hljs-params">e</span>) </span>{
  alert(<span class="hljs-string">&quot;&#x8BF7;&#x6C42;&#x7ED3;&#x675F;&#xFF08;&#x4E0D;&#x77E5;&#x9053;&#x662F;&#x5426;&#x6210;&#x529F;&#xFF09;&quot;</span>);
}
</code></pre>
<h2 id="t27&#x6587;&#x4EF6;&#x4E0A;&#x4F20;">&#x6587;&#x4EF6;&#x4E0A;&#x4F20; <a href="#t27&#x6587;&#x4EF6;&#x4E0A;&#x4F20;"> # </a></h2>
<p>HTML&#x7F51;&#x9875;&#x7684;<code>&lt;form&gt;</code>&#x5143;&#x7D20;&#x80FD;&#x591F;&#x4EE5;&#x56DB;&#x79CD;&#x683C;&#x5F0F;&#xFF0C;&#x5411;&#x670D;&#x52A1;&#x5668;&#x53D1;&#x9001;&#x6570;&#x636E;&#x3002;</p>
<ul>
<li>&#x4F7F;&#x7528;<code>POST</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;<code>enctype</code>&#x5C5E;&#x6027;&#x8BBE;&#x4E3A;<code>application/x-www-form-urlencoded</code>&#xFF0C;&#x8FD9;&#x662F;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#x3002;</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&quot;register.php&quot;</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;post&quot;</span> <span class="hljs-attribute">onsubmit</span>=<span class="hljs-value">&quot;AJAXSubmit(this); return false;&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<ul>
<li>&#x4F7F;&#x7528;<code>POST</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;<code>enctype</code>&#x5C5E;&#x6027;&#x8BBE;&#x4E3A;<code>text/plain</code>&#x3002;</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&quot;register.php&quot;</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;post&quot;</span> <span class="hljs-attribute">enctype</span>=<span class="hljs-value">&quot;text/plain&quot;</span> <span class="hljs-attribute">onsubmit</span>=<span class="hljs-value">&quot;AJAXSubmit(this); return false;&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<ul>
<li>&#x4F7F;&#x7528;<code>POST</code>&#x65B9;&#x6CD5;&#xFF0C;&#x5C06;<code>enctype</code>&#x5C5E;&#x6027;&#x8BBE;&#x4E3A;<code>multipart/form-data</code>&#x3002;</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&quot;register.php&quot;</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;post&quot;</span> <span class="hljs-attribute">enctype</span>=<span class="hljs-value">&quot;multipart/form-data&quot;</span> <span class="hljs-attribute">onsubmit</span>=<span class="hljs-value">&quot;AJAXSubmit(this); return false;&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<ul>
<li>&#x4F7F;&#x7528;<code>GET</code>&#x65B9;&#x6CD5;&#xFF0C;<code>enctype</code>&#x5C5E;&#x6027;&#x5C06;&#x88AB;&#x5FFD;&#x7565;&#x3002;</li>
</ul>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&quot;register.php&quot;</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;get&quot;</span> <span class="hljs-attribute">onsubmit</span>=<span class="hljs-value">&quot;AJAXSubmit(this); return false;&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<p>&#x67D0;&#x4E2A;&#x8868;&#x5355;&#x6709;&#x4E24;&#x4E2A;&#x5B57;&#x6BB5;&#xFF0C;&#x5206;&#x522B;&#x662F;<code>foo</code>&#x548C;<code>baz</code>&#xFF0C;&#x5176;&#x4E2D;<code>foo</code>&#x5B57;&#x6BB5;&#x7684;&#x503C;&#x7B49;&#x4E8E;<code>bar</code>&#xFF0C;<code>baz</code>&#x5B57;&#x6BB5;&#x7684;&#x503C;&#x4E00;&#x4E2A;&#x5206;&#x4E3A;&#x4E24;&#x884C;&#x7684;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x4E0A;&#x9762;&#x56DB;&#x79CD;&#x65B9;&#x6CD5;&#xFF0C;&#x90FD;&#x53EF;&#x4EE5;&#x5C06;&#x8FD9;&#x4E2A;&#x8868;&#x5355;&#x53D1;&#x9001;&#x5230;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<p>&#x7B2C;&#x4E00;&#x79CD;&#x65B9;&#x6CD5;&#x662F;&#x9ED8;&#x8BA4;&#x65B9;&#x6CD5;&#xFF0C;POST&#x53D1;&#x9001;&#xFF0C;Encoding type&#x4E3A;application/x-www-form-urlencoded&#x3002;</p>
<pre><code class="lang-http"><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/x-www-form-urlencoded</span>

<span class="cpp">foo=bar&amp;baz=The+first+line.&amp;<span class="hljs-preprocessor">#<span class="hljs-number">37</span>;<span class="hljs-number">0</span>D%<span class="hljs-number">0</span>AThe+second+<span class="hljs-keyword">line</span>.%<span class="hljs-number">0</span>D%<span class="hljs-number">0</span>A</span>
</span></code></pre>
<p>&#x7B2C;&#x4E8C;&#x79CD;&#x65B9;&#x6CD5;&#x662F;POST&#x53D1;&#x9001;&#xFF0C;Encoding type&#x4E3A;text/plain&#x3002;</p>
<pre><code class="lang-javascript">Content-Type: text/plain

foo=bar
baz=The first line.
The second line.
</code></pre>
<p>&#x7B2C;&#x4E09;&#x79CD;&#x65B9;&#x6CD5;&#x662F;POST&#x53D1;&#x9001;&#xFF0C;Encoding type&#x4E3A;multipart/form-data&#x3002;</p>
<pre><code class="lang-http"><span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">multipart/form-data; boundary=---------------------------314911788813839</span>

<span class="applescript"><span class="hljs-comment">-----------------------------314911788813839</span>
Content-Disposition: form-data; <span class="hljs-property">name</span>=<span class="hljs-string">&quot;foo&quot;</span>

bar
<span class="hljs-comment">-----------------------------314911788813839</span>
Content-Disposition: form-data; <span class="hljs-property">name</span>=<span class="hljs-string">&quot;baz&quot;</span>

The <span class="hljs-keyword">first</span> line.
The <span class="hljs-keyword">second</span> line.

<span class="hljs-comment">-----------------------------314911788813839--</span>
</span></code></pre>
<p>&#x7B2C;&#x56DB;&#x79CD;&#x65B9;&#x6CD5;&#x662F;GET&#x8BF7;&#x6C42;&#x3002;</p>
<pre><code class="lang-http">?foo=bar&amp;baz=The%20first%20line.%0AThe%20second%20line.
</code></pre>
<p>&#x901A;&#x5E38;&#xFF0C;&#x6211;&#x4EEC;&#x4F7F;&#x7528;file&#x63A7;&#x4EF6;&#x5B9E;&#x73B0;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x3002;</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;file-form&quot;</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">&quot;handler.php&quot;</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">&quot;POST&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;file&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;file-select&quot;</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">&quot;photos[]&quot;</span> <span class="hljs-attribute">multiple</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">button</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">&quot;submit&quot;</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">&quot;upload-button&quot;</span>&gt;</span>&#x4E0A;&#x4F20;<span class="hljs-tag">&lt;/<span class="hljs-title">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
</code></pre>
<p>&#x4E0A;&#x9762;HTML&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;file&#x63A7;&#x4EF6;&#x7684;multiple&#x5C5E;&#x6027;&#xFF0C;&#x6307;&#x5B9A;&#x53EF;&#x4EE5;&#x4E00;&#x6B21;&#x9009;&#x62E9;&#x591A;&#x4E2A;&#x6587;&#x4EF6;&#xFF1B;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#xFF0C;&#x5219;&#x4E00;&#x6B21;&#x53EA;&#x80FD;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x3002;</p>
<p>file&#x5BF9;&#x8C61;&#x7684;files&#x5C5E;&#x6027;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;FileList&#x5BF9;&#x8C61;&#xFF0C;&#x5305;&#x542B;&#x4E86;&#x7528;&#x6237;&#x9009;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> fileSelect = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;file-select&apos;</span>);
<span class="hljs-keyword">var</span> files = fileSelect.files;
</code></pre>
<p>&#x7136;&#x540E;&#xFF0C;&#x65B0;&#x5EFA;&#x4E00;&#x4E2A;FormData&#x5BF9;&#x8C61;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x7528;&#x6765;&#x6A21;&#x62DF;&#x53D1;&#x9001;&#x5230;&#x670D;&#x52A1;&#x5668;&#x7684;&#x8868;&#x5355;&#x6570;&#x636E;&#xFF0C;&#x628A;&#x9009;&#x4E2D;&#x7684;&#x6587;&#x4EF6;&#x6DFB;&#x52A0;&#x5230;&#x8FD9;&#x4E2A;&#x5BF9;&#x8C61;&#x4E0A;&#x9762;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> formData = <span class="hljs-keyword">new</span> FormData();

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; files.length; i++) {
  <span class="hljs-keyword">var</span> file = files[i];

  <span class="hljs-keyword">if</span> (!file.type.match(<span class="hljs-string">&apos;image.*&apos;</span>)) {
    <span class="hljs-keyword">continue</span>;
  }

  formData.append(<span class="hljs-string">&apos;photos[]&apos;</span>, file, file.name);
}
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x7684;FormData&#x5BF9;&#x8C61;&#x7684;append&#x65B9;&#x6CD5;&#xFF0C;&#x9664;&#x4E86;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x6587;&#x4EF6;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;&#x4E8C;&#x8FDB;&#x5236;&#x5BF9;&#x8C61;&#xFF08;Blob&#xFF09;&#x6216;&#x8005;&#x5B57;&#x7B26;&#x4E32;&#x3002;</p>
<p>{% highlight javascript %}</p>
<p>// Files
formData.append(name, file, filename);</p>
<p>// Blobs
formData.append(name, blob, filename);</p>
<p>// Strings
formData.append(name, value);    </p>
<p>{% endhighlight %}</p>
<p>append&#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x8868;&#x5355;&#x7684;&#x63A7;&#x4EF6;&#x540D;&#xFF0C;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x5B9E;&#x9645;&#x7684;&#x503C;&#xFF0C;&#x7B2C;&#x4E09;&#x4E2A;&#x53C2;&#x6570;&#x662F;&#x53EF;&#x9009;&#x7684;&#xFF0C;&#x901A;&#x5E38;&#x662F;&#x6587;&#x4EF6;&#x540D;&#x3002;</p>
<p>&#x6700;&#x540E;&#xFF0C;&#x4F7F;&#x7528;Ajax&#x65B9;&#x6CD5;&#x5411;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x3002;</p>
<p>{% highlight javascript %}</p>
<p>var xhr = new XMLHttpRequest();</p>
<p>xhr.open(&apos;POST&apos;, &apos;handler.php&apos;, true);</p>
<p>xhr.onload = function () {
  if (xhr.status !== 200) {
    alert(&apos;An error occurred!&apos;);
  }
};</p>
<p>xhr.send(formData);</p>
<p>{% endhighlight %}</p>
<p>&#x76EE;&#x524D;&#xFF0C;&#x5404;&#x5927;&#x6D4F;&#x89C8;&#x5668;&#xFF08;&#x5305;&#x62EC;IE 10&#xFF09;&#x90FD;&#x652F;&#x6301;Ajax&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x9664;&#x4E86;&#x4F7F;&#x7528;FormData&#x63A5;&#x53E3;&#x4E0A;&#x4F20;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x4F7F;&#x7528;File API&#x4E0A;&#x4F20;&#x3002;</p>
<pre><code class="lang-javascript">
<span class="hljs-keyword">var</span> file = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;test-input&apos;</span>).files[<span class="hljs-number">0</span>];
<span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();

xhr.open(<span class="hljs-string">&apos;POST&apos;</span>, <span class="hljs-string">&apos;myserver/uploads&apos;</span>);
xhr.setRequestHeader(<span class="hljs-string">&apos;Content-Type&apos;</span>, file.type);
xhr.send(file);
</code></pre>
<p>&#x53EF;&#x4EE5;&#x770B;&#x5230;&#xFF0C;&#x4E0A;&#x9762;&#x8FD9;&#x79CD;&#x5199;&#x6CD5;&#x6BD4;FormData&#x7684;&#x5199;&#x6CD5;&#xFF0C;&#x8981;&#x7B80;&#x5355;&#x5F88;&#x591A;&#x3002;</p>
<h2 id="t28Fetch API">Fetch API <a href="#t28Fetch API"> # </a></h2>
<h3 id="t29&#x57FA;&#x672C;&#x7528;&#x6CD5;">&#x57FA;&#x672C;&#x7528;&#x6CD5; <a href="#t29&#x57FA;&#x672C;&#x7528;&#x6CD5;"> # </a></h3>
<p>Ajax&#x64CD;&#x4F5C;&#x6240;&#x7528;&#x7684;<code>XMLHttpRequest</code>&#x5BF9;&#x8C61;&#xFF0C;&#x5DF2;&#x7ECF;&#x6709;&#x5341;&#x591A;&#x5E74;&#x7684;&#x5386;&#x53F2;&#xFF0C;&#x5B83;&#x7684;API&#x8BBE;&#x8BA1;&#x5E76;&#x4E0D;&#x662F;&#x5F88;&#x597D;&#xFF0C;&#x8F93;&#x5165;&#x3001;&#x8F93;&#x51FA;&#x3001;&#x72B6;&#x6001;&#x90FD;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x7BA1;&#x7406;&#xFF0C;&#x5BB9;&#x6613;&#x5199;&#x51FA;&#x975E;&#x5E38;&#x6DF7;&#x4E71;&#x7684;&#x4EE3;&#x7801;&#x3002;Fetch API&#x662F;&#x4E00;&#x79CD;&#x65B0;&#x89C4;&#x8303;&#xFF0C;&#x7528;&#x6765;&#x53D6;&#x4EE3;<code>XMLHttpRequest</code>&#x5BF9;&#x8C61;&#x3002;&#x5B83;&#x4E3B;&#x8981;&#x6709;&#x4E24;&#x4E2A;&#x7279;&#x70B9;&#xFF0C;&#x4E00;&#x662F;&#x63A5;&#x53E3;&#x5408;&#x7406;&#x5316;&#xFF0C;Ajax&#x662F;&#x5C06;&#x6240;&#x6709;&#x4E0D;&#x540C;&#x6027;&#x8D28;&#x7684;&#x63A5;&#x53E3;&#x90FD;&#x653E;&#x5728;XHR&#x5BF9;&#x8C61;&#x4E0A;&#xFF0C;&#x800C;Fetch&#x662F;&#x5C06;&#x5B83;&#x4EEC;&#x5206;&#x6563;&#x5728;&#x51E0;&#x4E2A;&#x4E0D;&#x540C;&#x7684;&#x5BF9;&#x8C61;&#x4E0A;&#xFF0C;&#x8BBE;&#x8BA1;&#x66F4;&#x5408;&#x7406;&#xFF1B;&#x4E8C;&#x662F;Fetch&#x64CD;&#x4F5C;&#x8FD4;&#x56DE;<code>Promise</code>&#x5BF9;&#x8C61;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x5D4C;&#x5957;&#x7684;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x68C0;&#x67E5;&#x6D4F;&#x89C8;&#x5668;&#x662F;&#x5426;&#x90E8;&#x7F72;&#x4E86;Fetch API&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (fetch <span class="hljs-keyword">in</span> <span class="hljs-built_in">window</span>){
  <span class="hljs-comment">// &#x652F;&#x6301;</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-comment">// &#x4E0D;&#x652F;&#x6301;</span>
}
</code></pre>
<p>&#x4E0B;&#x9762;&#x662F;&#x4E00;&#x4E2A;Fetch API&#x7684;&#x7B80;&#x5355;&#x4F8B;&#x5B50;&#x3002;</p>
<pre><code class="lang-javascript">fetch(url).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{
  <span class="hljs-keyword">return</span> response.json();
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">jsonData</span>) </span>{
  <span class="hljs-built_in">console</span>.log(jsonData);
}).catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x51FA;&#x9519;&#x4E86;&apos;</span>);
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x5411;&#x6307;&#x5B9A;&#x7684;URL&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#xFF0C;&#x5F97;&#x5230;&#x56DE;&#x5E94;&#x540E;&#xFF0C;&#x5C06;&#x5176;&#x8F6C;&#x4E3A;JSON&#x683C;&#x5F0F;&#xFF0C;&#x8F93;&#x51FA;&#x5230;&#x63A7;&#x5236;&#x53F0;&#x3002;&#x5982;&#x679C;&#x51FA;&#x9519;&#xFF0C;&#x5219;&#x8F93;&#x51FA;&#x4E00;&#x6761;&#x63D0;&#x793A;&#x4FE1;&#x606F;&#x3002;&#x6CE8;&#x610F;&#xFF0C;<code>fetch</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x7684;&#x662F;&#x4E00;&#x4E2A;Promise&#x5BF9;&#x8C61;&#x3002;</p>
<p>&#x4F5C;&#x4E3A;&#x6BD4;&#x8F83;&#xFF0C;<code>XMLHttpRequest</code>&#x7684;&#x5199;&#x6CD5;&#x5982;&#x4E0B;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> xhr = <span class="hljs-keyword">new</span> XMLHttpRequest();
xhr.open(<span class="hljs-string">&apos;GET&apos;</span>, url);
xhr.responseType = <span class="hljs-string">&apos;json&apos;</span>;
xhr.onload = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(xhr.response);
};
xhr.onerror = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x51FA;&#x9519;&#x4E86;&apos;</span>);
};
xhr.send();
</code></pre>
<h3 id="t30stream&#x6570;&#x636E;&#x6D41;">stream&#x6570;&#x636E;&#x6D41; <a href="#t30stream&#x6570;&#x636E;&#x6D41;"> # </a></h3>
<p>Fetch API&#x6700;&#x5927;&#x7684;&#x7279;&#x70B9;&#x662F;&#xFF0C;&#x9664;&#x4E86;&#x8FD4;&#x56DE;<code>Promise</code>&#x5BF9;&#x8C61;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x70B9;&#x5C31;&#x662F;&#x6570;&#x636E;&#x4F20;&#x9001;&#x662F;&#x4EE5;&#x6570;&#x636E;&#x6D41;&#xFF08;stream&#xFF09;&#x7684;&#x5F62;&#x5F0F;&#x8FDB;&#x884C;&#x7684;&#x3002;&#x5BF9;&#x4E8E;&#x5927;&#x6587;&#x4EF6;&#xFF0C;&#x6570;&#x636E;&#x662F;&#x4E00;&#x6BB5;&#x4E00;&#x6BB5;&#x5F97;&#x5230;&#x7684;&#x3002;</p>
<pre><code class="lang-javascript">response.text().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">responseText</span>) </span>{
  <span class="hljs-built_in">console</span>.log(responseText);
}
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#x7684;<code>text()</code>&#xFF0C;&#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x6D41;&#x8BFB;&#x53D6;&#x5668;&#xFF0C;&#x5E76;&#x4F7F;&#x7528;&#x6307;&#x5B9A;&#x683C;&#x5F0F;&#x89E3;&#x8BFB;&#x3002;</p>
<p>Fetch API&#x63D0;&#x4F9B;&#x4EE5;&#x4E0B;&#x4E94;&#x4E2A;&#x6570;&#x636E;&#x6D41;&#x8BFB;&#x53D6;&#x5668;&#x3002;</p>
<ul>
<li><code>.text()</code>&#xFF1A;&#x8FD4;&#x56DE;&#x5B57;&#x7B26;&#x4E32;</li>
<li><code>.json()</code>&#xFF1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;JSON&#x5BF9;&#x8C61;</li>
<li><code>.formData()</code>&#xFF1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>FormData</code>&#x5BF9;&#x8C61;</li>
<li><code>.blob()</code>&#xFF1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>blob</code>&#x5BF9;&#x8C61;</li>
<li><code>.arrayBuffer()</code>&#xFF1A;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x4E8C;&#x8FDB;&#x5236;&#x6570;&#x7EC4;</li>
</ul>
<p>&#x6570;&#x636E;&#x6D41;&#x53EA;&#x80FD;&#x8BFB;&#x53D6;&#x4E00;&#x6B21;&#xFF0C;&#x4E00;&#x65E6;&#x8BFB;&#x53D6;&#xFF0C;&#x6570;&#x636E;&#x6D41;&#x5C31;&#x7A7A;&#x4E86;&#x3002;&#x518D;&#x6B21;&#x8BFB;&#x53D6;&#x5C31;&#x4E0D;&#x4F1A;&#x5F97;&#x5230;&#x7ED3;&#x679C;&#x3002;&#x89E3;&#x51B3;&#x65B9;&#x6CD5;&#x662F;&#x5728;&#x8BFB;&#x53D6;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x4F7F;&#x7528;<code>.clone()</code>&#x65B9;&#x6CD5;&#xFF0C;&#x590D;&#x5236;&#x4E00;&#x4EFD;&#x4E00;&#x6A21;&#x4E00;&#x6837;&#x7684;&#x526F;&#x672C;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> url = <span class="hljs-string">&apos;LargeFile.txt&apos;</span>;
<span class="hljs-keyword">var</span> progress = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> contentLength = <span class="hljs-number">0</span>;

fetch(url).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{
  <span class="hljs-comment">// &#x672C;&#x6B21;&#x8BF7;&#x6C42;&#x603B;&#x7684;&#x6570;&#x636E;&#x957F;&#x5EA6;</span>
  contentLength = response.headers.get(<span class="hljs-string">&apos;Content-Length&apos;</span>);
  <span class="hljs-keyword">var</span> getStream = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">reader</span>) </span>{};
  <span class="hljs-keyword">return</span> getStream(response.body.getReader());
})
.catch(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">error</span>) </span>{
  <span class="hljs-built_in">console</span>.log(error);
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;<code>response.body.getReader()</code>&#x8FD4;&#x56DE;&#x7684;&#x5C31;&#x662F;&#x6570;&#x636E;&#x6D41;&#x4E4B;&#x4E2D;&#x7684;&#x4E00;&#x6BB5;&#x3002;&#x5904;&#x7406;&#x6570;&#x636E;&#x6D41;&#x7684;<code>getStream</code>&#x51FD;&#x6570;&#x4EE3;&#x7801;&#x5982;&#x4E0B;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> progress = <span class="hljs-number">0</span>;
<span class="hljs-keyword">var</span> contentLength = <span class="hljs-number">0</span>;

<span class="hljs-keyword">var</span> getStream = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">reader</span>) </span>{
  <span class="hljs-keyword">return</span> reader.read().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">result</span>) </span>{
    <span class="hljs-comment">// &#x5982;&#x679C;&#x6570;&#x636E;&#x5DF2;&#x7ECF;&#x8BFB;&#x53D6;&#x5B8C;&#x6BD5;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;</span>
    <span class="hljs-keyword">if</span> (result.done) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// &#x53D6;&#x51FA;&#x672C;&#x6BB5;&#x6570;&#x636E;&#xFF08;&#x4E8C;&#x8FDB;&#x5236;&#x683C;&#x5F0F;&#xFF09;</span>
    <span class="hljs-keyword">var</span> chunk = result.value;

    <span class="hljs-keyword">var</span> text = <span class="hljs-string">&apos;&apos;</span>;
    <span class="hljs-comment">// &#x5047;&#x5B9A;&#x6570;&#x636E;&#x662F;UTF-8&#x7F16;&#x7801;&#xFF0C;&#x524D;&#x4E09;&#x5B57;&#x8282;&#x662F;&#x6570;&#x636E;&#x5934;&#xFF0C;</span>
    <span class="hljs-comment">// &#x800C;&#x4E14;&#x6BCF;&#x4E2A;&#x5B57;&#x7B26;&#x5360;&#x636E;&#x4E00;&#x4E2A;&#x5B57;&#x8282;&#xFF08;&#x5373;&#x90FD;&#x4E3A;&#x82F1;&#x6587;&#x5B57;&#x7B26;&#xFF09;</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">3</span>; i &lt; chunk.byteLength; i++) {
      text += <span class="hljs-built_in">String</span>.fromCharCode(chunk[i]);
    }

    <span class="hljs-comment">// &#x5C06;&#x672C;&#x6BB5;&#x6570;&#x636E;&#x8FFD;&#x52A0;&#x5230;&#x7F51;&#x9875;&#x4E4B;&#x4E2D;</span>
    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;content&apos;</span>).innerHTML += text;

    <span class="hljs-comment">// &#x8BA1;&#x7B97;&#x5F53;&#x524D;&#x8FDB;&#x5EA6;</span>
    progress += chunk.byteLength;
    <span class="hljs-built_in">console</span>.log(((progress / contentLength) * <span class="hljs-number">100</span>) + <span class="hljs-string">&apos;%&apos;</span>);

    <span class="hljs-comment">// &#x9012;&#x5F52;&#x5904;&#x7406;&#x4E0B;&#x4E00;&#x6BB5;&#x6570;&#x636E;</span>
    <span class="hljs-keyword">return</span> getStream(reader);
  };
};
</code></pre>
<p>&#x4E0A;&#x9762;&#x8FD9;&#x6837;&#x7684;&#x6570;&#x636E;&#x6D41;&#x5904;&#x7406;&#xFF0C;&#x53EF;&#x4EE5;&#x63D0;&#x9AD8;&#x7F51;&#x7AD9;&#x6027;&#x80FD;&#x8868;&#x73B0;&#xFF0C;&#x51CF;&#x5C11;&#x5185;&#x5B58;&#x5360;&#x7528;&#xFF0C;&#x5BF9;&#x4E8E;&#x8BF7;&#x6C42;&#x5927;&#x6587;&#x4EF6;&#x6216;&#x8005;&#x7F51;&#x901F;&#x6162;&#x7684;&#x573A;&#x666F;&#x76F8;&#x5F53;&#x6709;&#x7528;&#x3002;&#x4F20;&#x7EDF;&#x7684;<code>XMLHTTPRequest</code>&#x5BF9;&#x8C61;&#x4E0D;&#x652F;&#x6301;&#x6570;&#x636E;&#x6D41;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x6570;&#x636E;&#x5FC5;&#x987B;&#x653E;&#x5728;&#x7F13;&#x5B58;&#x91CC;&#xFF0C;&#x7B49;&#x5230;&#x5168;&#x90E8;&#x62FF;&#x5230;&#x540E;&#xFF0C;&#x518D;&#x4E00;&#x6B21;&#x6027;&#x5410;&#x51FA;&#x6765;&#x3002;</p>
<h3 id="t31fetch()">fetch() <a href="#t31fetch()"> # </a></h3>
<p><code>fetch</code>&#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E00;&#x4E2A;&#x53C2;&#x6570;&#x53EF;&#x4EE5;&#x662F;URL&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x540E;&#x6587;&#x8981;&#x8BB2;&#x5230;&#x7684;<code>Request</code>&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x3002;<code>Fetch</code>&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;<code>Promise</code>&#x5BF9;&#x8C61;&#xFF0C;&#x5E76;&#x5C06;&#x4E00;&#x4E2A;<code>response</code>&#x5BF9;&#x8C61;&#x4F20;&#x7ED9;&#x56DE;&#x8C03;&#x51FD;&#x6570;&#x3002;</p>
<p><code>response</code>&#x5BF9;&#x8C61;&#x6709;&#x4E00;&#x4E2A;<code>ok</code>&#x5C5E;&#x6027;&#xFF0C;&#x5982;&#x679C;&#x8FD4;&#x56DE;&#x7684;&#x72B6;&#x6001;&#x7801;&#x5728;200&#x5230;299&#x4E4B;&#x95F4;&#xFF08;&#x5373;&#x8BF7;&#x6C42;&#x6210;&#x529F;&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x4E3A;<code>true</code>&#xFF0C;&#x5426;&#x5219;&#x4E3A;<code>false</code>&#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5224;&#x65AD;&#x8BF7;&#x6C42;&#x662F;&#x5426;&#x6210;&#x529F;&#x7684;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5199;&#x6210;&#x4E0B;&#x9762;&#x8FD9;&#x6837;&#x3002;</p>
<pre><code class="lang-javascript">fetch(<span class="hljs-string">&apos;./api/some.json&apos;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{
  <span class="hljs-keyword">if</span> (response.ok) {
    response.json().then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) </span>{
      <span class="hljs-built_in">console</span>.log(data);
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#xFF0C;&#x72B6;&#x6001;&#x7801;&#x4E3A;&apos;</span>, response.status);
  }
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;&#x51FA;&#x9519;&#xFF1A;&apos;</span>, err);
});
</code></pre>
<p><code>response</code>&#x5BF9;&#x8C61;&#x9664;&#x4E86;<code>json</code>&#x65B9;&#x6CD5;&#xFF0C;&#x8FD8;&#x5305;&#x542B;&#x4E86;&#x670D;&#x52A1;&#x5668;HTTP&#x56DE;&#x5E94;&#x7684;&#x5143;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="lang-javascript">fetch(<span class="hljs-string">&apos;users.json&apos;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
  <span class="hljs-built_in">console</span>.log(response.headers.get(<span class="hljs-string">&apos;Content-Type&apos;</span>));
  <span class="hljs-built_in">console</span>.log(response.headers.get(<span class="hljs-string">&apos;Date&apos;</span>));
  <span class="hljs-built_in">console</span>.log(response.status);
  <span class="hljs-built_in">console</span>.log(response.statusText);
  <span class="hljs-built_in">console</span>.log(response.type);
  <span class="hljs-built_in">console</span>.log(response.url);
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;<code>response</code>&#x5BF9;&#x8C61;&#x6709;&#x5F88;&#x591A;&#x5C5E;&#x6027;&#xFF0C;&#x5176;&#x4E2D;&#x7684;<code>response.type</code>&#x5C5E;&#x6027;&#x6BD4;&#x8F83;&#x7279;&#x522B;&#xFF0C;&#x8868;&#x793A;HTTP&#x56DE;&#x5E94;&#x7684;&#x7C7B;&#x578B;&#xFF0C;&#x5B83;&#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x4E2A;&#x503C;&#x3002;</p>
<ul>
<li>basic&#xFF1A;&#x6B63;&#x5E38;&#x7684;&#x540C;&#x57DF;&#x8BF7;&#x6C42;</li>
<li>cors&#xFF1A;CORS&#x673A;&#x5236;&#x4E0B;&#x7684;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;</li>
<li>opaque&#xFF1A;&#x975E;CORS&#x673A;&#x5236;&#x4E0B;&#x7684;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#xFF0C;&#x8FD9;&#x65F6;&#x65E0;&#x6CD5;&#x8BFB;&#x53D6;&#x8FD4;&#x56DE;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x5224;&#x65AD;&#x662F;&#x5426;&#x8BF7;&#x6C42;&#x6210;&#x529F;</li>
</ul>
<p>&#x5982;&#x679C;&#x9700;&#x8981;&#x5728;CORS&#x673A;&#x5236;&#x4E0B;&#x53D1;&#x51FA;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x6307;&#x660E;&#x72B6;&#x6001;&#x3002;</p>
<pre><code class="lang-javascript">fetch(<span class="hljs-string">&apos;http://some-site.com/cors-enabled/some.json&apos;</span>, {mode: <span class="hljs-string">&apos;cors&apos;</span>})
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
    <span class="hljs-keyword">return</span> response.text();
  })
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&apos;Request successful&apos;</span>, text);
  })
  .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
    log(<span class="hljs-string">&apos;Request failed&apos;</span>, error)
  });
</code></pre>
<p>&#x9664;&#x4E86;&#x6307;&#x5B9A;&#x6A21;&#x5F0F;&#xFF0C;fetch&#x65B9;&#x6CD5;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#x8FD8;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x914D;&#x7F6E;&#x5176;&#x4ED6;&#x503C;&#xFF0C;&#x6BD4;&#x5982;&#x6307;&#x5B9A;cookie&#x8FDE;&#x540C;HTTP&#x8BF7;&#x6C42;&#x4E00;&#x8D77;&#x53D1;&#x51FA;&#x3002;</p>
<pre><code class="lang-javascript">fetch(url, {
  credentials: <span class="hljs-string">&apos;include&apos;</span>
})
</code></pre>
<p>&#x53D1;&#x51FA;POST&#x8BF7;&#x6C42;&#x7684;&#x5199;&#x6CD5;&#x5982;&#x4E0B;&#x3002;</p>
<pre><code class="lang-javascript">fetch(<span class="hljs-string">&quot;http://www.example.org/submit.php&quot;</span>, {
  method: <span class="hljs-string">&quot;POST&quot;</span>,
  headers: {
    <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;application/x-www-form-urlencoded&quot;</span>
  },
  body: <span class="hljs-string">&quot;firstName=Nikhil&amp;favColor=blue&amp;password=easytoguess&quot;</span>
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
  <span class="hljs-keyword">if</span> (res.ok) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Perfect! Your settings are saved.&quot;</span>);
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (res.status == <span class="hljs-number">401</span>) {
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Oops! You are not authorized.&quot;</span>);
  }
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Error submitting form!&quot;</span>);
});
</code></pre>
<p>&#x76EE;&#x524D;&#xFF0C;&#x8FD8;&#x6709;&#x4E00;&#x4E9B;<code>XMLHttpRequest</code>&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x505A;&#x5230;&#xFF0C;&#x4F46;&#x662F;Fetch API&#x8FD8;&#x6CA1;&#x505A;&#x5230;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x6BD4;&#x5982;&#x4E2D;&#x9014;&#x4E2D;&#x65AD;HTTP&#x8BF7;&#x6C42;&#xFF0C;&#x4EE5;&#x53CA;&#x83B7;&#x53D6;HTTP&#x8BF7;&#x6C42;&#x7684;&#x8FDB;&#x5EA6;&#x3002;&#x8FD9;&#x4E9B;&#x4E0D;&#x8DB3;&#x4E0E;Fetch&#x8FD4;&#x56DE;&#x7684;&#x662F;Promise&#x5BF9;&#x8C61;&#x6709;&#x5173;&#x3002;</p>
<h3 id="t32Headers">Headers <a href="#t32Headers"> # </a></h3>
<p>Fetch API&#x5F15;&#x5165;&#x4E09;&#x4E2A;&#x65B0;&#x7684;&#x5BF9;&#x8C61;&#xFF08;&#x4E5F;&#x662F;&#x6784;&#x9020;&#x51FD;&#x6570;&#xFF09;&#xFF1A;<code>Headers</code>, <code>Request</code>&#x548C;<code>Response</code>&#x3002;&#x5176;&#x4E2D;&#xFF0C;<code>Headers</code>&#x5BF9;&#x8C61;&#x7528;&#x6765;&#x6784;&#x9020;/&#x8BFB;&#x53D6;HTTP&#x6570;&#x636E;&#x5305;&#x7684;&#x5934;&#x4FE1;&#x606F;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> content = <span class="hljs-string">&apos;Hello World&apos;</span>;
<span class="hljs-keyword">var</span> headers = <span class="hljs-keyword">new</span> Headers();
headers.append(<span class="hljs-string">&quot;Accept&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>);
headers.append(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;text/plain&quot;</span>);
headers.append(<span class="hljs-string">&quot;Content-Length&quot;</span>, content.length.toString());
headers.append(<span class="hljs-string">&quot;X-Custom-Header&quot;</span>, <span class="hljs-string">&quot;ProcessThisImmediately&quot;</span>);
</code></pre>
<p><code>Headers</code>&#x5BF9;&#x8C61;&#x7684;&#x5B9E;&#x4F8B;&#xFF0C;&#x9664;&#x4E86;&#x4F7F;&#x7528;<code>append</code>&#x65B9;&#x6CD5;&#x6DFB;&#x52A0;&#x5C5E;&#x6027;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x76F4;&#x63A5;&#x901A;&#x8FC7;&#x6784;&#x9020;&#x51FD;&#x6570;&#x4E00;&#x6B21;&#x6027;&#x751F;&#x6210;&#x3002;</p>
<pre><code class="lang-javascript">reqHeaders = <span class="hljs-keyword">new</span> Headers({
  <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;text/plain&quot;</span>,
  <span class="hljs-string">&quot;Content-Length&quot;</span>: content.length.toString(),
  <span class="hljs-string">&quot;X-Custom-Header&quot;</span>: <span class="hljs-string">&quot;ProcessThisImmediately&quot;</span>,
});
</code></pre>
<p>Headers&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x8FD8;&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x4E9B;&#x5DE5;&#x5177;&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-javascript">reqHeaders.has(<span class="hljs-string">&quot;Content-Type&quot;</span>) <span class="hljs-comment">// true</span>
reqHeaders.has(<span class="hljs-string">&quot;Set-Cookie&quot;</span>) <span class="hljs-comment">// false</span>
reqHeaders.set(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;text/html&quot;</span>)
reqHeaders.append(<span class="hljs-string">&quot;X-Custom-Header&quot;</span>, <span class="hljs-string">&quot;AnotherValue&quot;</span>)

reqHeaders.get(<span class="hljs-string">&quot;Content-Length&quot;</span>) <span class="hljs-comment">// 11</span>
reqHeaders.getAll(<span class="hljs-string">&quot;X-Custom-Header&quot;</span>) <span class="hljs-comment">// [&quot;ProcessThisImmediately&quot;, &quot;AnotherValue&quot;]</span>

reqHeaders.delete(<span class="hljs-string">&quot;X-Custom-Header&quot;</span>)
reqHeaders.getAll(<span class="hljs-string">&quot;X-Custom-Header&quot;</span>) <span class="hljs-comment">// []</span>
</code></pre>
<p>&#x751F;&#x6210;Header&#x5B9E;&#x4F8B;&#x4EE5;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x5C06;&#x5B83;&#x4F5C;&#x4E3A;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x4F20;&#x5165;Request&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> headers = <span class="hljs-keyword">new</span> Headers();
headers.append(<span class="hljs-string">&apos;Accept&apos;</span>, <span class="hljs-string">&apos;application/json&apos;</span>);
<span class="hljs-keyword">var</span> request = <span class="hljs-keyword">new</span> Request(URL, {headers: headers});

fetch(request).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
  <span class="hljs-built_in">console</span>.log(response.headers);
});
</code></pre>
<p>&#x540C;&#x6837;&#x5730;&#xFF0C;Headers&#x5B9E;&#x4F8B;&#x53EF;&#x4EE5;&#x7528;&#x6765;&#x6784;&#x9020;Response&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> headers = <span class="hljs-keyword">new</span> Headers({
  <span class="hljs-string">&apos;Content-Type&apos;</span>: <span class="hljs-string">&apos;application/json&apos;</span>,
  <span class="hljs-string">&apos;Cache-Control&apos;</span>: <span class="hljs-string">&apos;max-age=3600&apos;</span>
});

<span class="hljs-keyword">var</span> response = <span class="hljs-keyword">new</span> Response(
  <span class="hljs-built_in">JSON</span>.stringify({photos: {photo: []}}),
  {<span class="hljs-string">&apos;status&apos;</span>: <span class="hljs-number">200</span>, headers: headers}
);

response.json().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">json</span>) </span>{
  insertPhotos(json);
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6784;&#x9020;&#x4E86;&#x4E00;&#x4E2A;HTTP&#x56DE;&#x5E94;&#x3002;&#x76EE;&#x524D;&#xFF0C;&#x6D4F;&#x89C8;&#x5668;&#x6784;&#x9020;HTTP&#x56DE;&#x5E94;&#x6CA1;&#x6709;&#x592A;&#x5927;&#x7528;&#x5904;&#xFF0C;&#x4F46;&#x662F;&#x968F;&#x7740;Service Worker&#x7684;&#x90E8;&#x7F72;&#xFF0C;&#x4E0D;&#x4E45;&#x6D4F;&#x89C8;&#x5668;&#x5C31;&#x53EF;&#x4EE5;&#x5411;Service Worker&#x53D1;&#x51FA;HTTP&#x56DE;&#x5E94;&#x3002;</p>
<h3 id="t33Request&#x5BF9;&#x8C61;">Request&#x5BF9;&#x8C61; <a href="#t33Request&#x5BF9;&#x8C61;"> # </a></h3>
<p>Request&#x5BF9;&#x8C61;&#x7528;&#x6765;&#x6784;&#x9020;HTTP&#x8BF7;&#x6C42;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> Request(<span class="hljs-string">&quot;/index.html&quot;</span>);
req.method <span class="hljs-comment">// &quot;GET&quot;</span>
req.url <span class="hljs-comment">// &quot;http://example.com/index.html&quot;</span>
</code></pre>
<p>Request&#x5BF9;&#x8C61;&#x7684;&#x7B2C;&#x4E8C;&#x4E2A;&#x53C2;&#x6570;&#xFF0C;&#x8868;&#x793A;&#x914D;&#x7F6E;&#x5BF9;&#x8C61;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> uploadReq = <span class="hljs-keyword">new</span> Request(<span class="hljs-string">&quot;/uploadImage&quot;</span>, {
  method: <span class="hljs-string">&quot;POST&quot;</span>,
  headers: {
    <span class="hljs-string">&quot;Content-Type&quot;</span>: <span class="hljs-string">&quot;image/png&quot;</span>,
  },
  body: <span class="hljs-string">&quot;image data&quot;</span>
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x6307;&#x5B9A;Request&#x5BF9;&#x8C61;&#x4F7F;&#x7528;POST&#x65B9;&#x6CD5;&#x53D1;&#x51FA;&#xFF0C;&#x5E76;&#x6307;&#x5B9A;HTTP&#x5934;&#x4FE1;&#x606F;&#x548C;&#x4FE1;&#x606F;&#x4F53;&#x3002;</p>
<p>&#x4E0B;&#x9762;&#x662F;&#x53E6;&#x4E00;&#x4E2A;&#x4F8B;&#x5B50;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> req = <span class="hljs-keyword">new</span> Request(URL, {method: <span class="hljs-string">&apos;GET&apos;</span>, cache: <span class="hljs-string">&apos;reload&apos;</span>});
fetch(req).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
  <span class="hljs-keyword">return</span> response.json();
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">json</span>) </span>{
  someOperator(json);
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x6307;&#x5B9A;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x4E3A;GET&#xFF0C;&#x5E76;&#x4E14;&#x8981;&#x6C42;&#x6D4F;&#x89C8;&#x5668;&#x4E0D;&#x5F97;&#x7F13;&#x5B58;response&#x3002;</p>
<p>Request&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x6709;&#x4E24;&#x4E2A;&#x5C5E;&#x6027;&#x662F;&#x53EA;&#x8BFB;&#x7684;&#xFF0C;&#x4E0D;&#x80FD;&#x624B;&#x52A8;&#x8BBE;&#x7F6E;&#x3002;&#x4E00;&#x4E2A;&#x662F;referrer&#x5C5E;&#x6027;&#xFF0C;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7684;&#x6765;&#x6E90;&#xFF0C;&#x7531;&#x6D4F;&#x89C8;&#x5668;&#x8BBE;&#x7F6E;&#xFF0C;&#x6709;&#x53EF;&#x80FD;&#x662F;&#x7A7A;&#x5B57;&#x7B26;&#x4E32;&#x3002;&#x53E6;&#x4E00;&#x4E2A;&#x662F;context&#x5C5E;&#x6027;&#xFF0C;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x53D1;&#x51FA;&#x7684;&#x4E0A;&#x4E0B;&#x6587;&#xFF0C;&#x5982;&#x679C;&#x662F;image&#xFF0C;&#x8868;&#x793A;&#x662F;&#x4ECE;img&#x6807;&#x7B7E;&#x53D1;&#x51FA;&#xFF0C;&#x5982;&#x679C;&#x662F;worker&#xFF0C;&#x8868;&#x793A;&#x662F;&#x4ECE;worker&#x811A;&#x672C;&#x53D1;&#x51FA;&#xFF0C;&#x5982;&#x679C;&#x662F;fetch&#xFF0C;&#x8868;&#x793A;&#x662F;&#x4ECE;fetch&#x51FD;&#x6570;&#x53D1;&#x51FA;&#x7684;&#x3002;</p>
<p>Request&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x7684;mode&#x5C5E;&#x6027;&#xFF0C;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x662F;&#x5426;&#x8DE8;&#x57DF;&#xFF0C;&#x5408;&#x6CD5;&#x7684;&#x503C;&#x6709;&#x4EE5;&#x4E0B;&#x4E09;&#x79CD;&#xFF1A;same-origin&#x3001;no-cors&#xFF08;&#x9ED8;&#x8BA4;&#x503C;&#xFF09;&#x3001;cors&#x3002;&#x5F53;&#x8BBE;&#x7F6E;&#x4E3A;same-origin&#x65F6;&#xFF0C;&#x53EA;&#x80FD;&#x5411;&#x540C;&#x57DF;&#x7684;URL&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#xFF0C;&#x5426;&#x5219;&#x4F1A;&#x62A5;&#x9519;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> arbitraryUrl = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;url-input&quot;</span>).value;
fetch(arbitraryUrl, { mode: <span class="hljs-string">&quot;same-origin&quot;</span> }).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">res</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Response succeeded?&quot;</span>, res.ok);
}, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Please enter a same-origin URL!&quot;</span>);
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x5982;&#x679C;&#x7528;&#x6237;&#x8F93;&#x5165;&#x7684;URL&#x4E0D;&#x662F;&#x540C;&#x57DF;&#x7684;&#xFF0C;&#x5C06;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x4F1A;&#x53D1;&#x51FA;&#x8BF7;&#x6C42;&#x3002;</p>
<p>&#x5982;&#x679C;mode&#x5C5E;&#x6027;&#x4E3A;no-cors&#xFF0C;&#x5C31;&#x4E0E;&#x9ED8;&#x8BA4;&#x7684;&#x6D4F;&#x89C8;&#x5668;&#x884C;&#x4E3A;&#x6CA1;&#x6709;&#x4E0D;&#x540C;&#xFF0C;&#x7C7B;&#x4F3C;script&#x6807;&#x7B7E;&#x52A0;&#x8F7D;&#x5916;&#x90E8;&#x811A;&#x672C;&#x6587;&#x4EF6;&#x3001;img&#x6807;&#x7B7E;&#x52A0;&#x8F7D;&#x5916;&#x90E8;&#x56FE;&#x7247;&#x3002;&#x5982;&#x679C;mode&#x5C5E;&#x6027;&#x4E3A;cors&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x5411;&#x90E8;&#x7F72;&#x4E86;CORS&#x673A;&#x5236;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x53D1;&#x51FA;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> u = <span class="hljs-keyword">new</span> URLSearchParams();
u.append(<span class="hljs-string">&apos;method&apos;</span>, <span class="hljs-string">&apos;flickr.interestingness.getList&apos;</span>);
u.append(<span class="hljs-string">&apos;api_key&apos;</span>, <span class="hljs-string">&apos;&lt;insert api key here&gt;&apos;</span>);
u.append(<span class="hljs-string">&apos;format&apos;</span>, <span class="hljs-string">&apos;json&apos;</span>);
u.append(<span class="hljs-string">&apos;nojsoncallback&apos;</span>, <span class="hljs-string">&apos;1&apos;</span>);

<span class="hljs-keyword">var</span> apiCall = fetch(<span class="hljs-string">&apos;https://api.flickr.com/services/rest?&apos;</span> + u);

apiCall.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
  <span class="hljs-keyword">return</span> response.json().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">json</span>) </span>{
    <span class="hljs-comment">// photo is a list of photos.</span>
    <span class="hljs-keyword">return</span> json.photos.photo;
  });
}).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">photos</span>) </span>{
  photos.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">photo</span>) </span>{
    <span class="hljs-built_in">console</span>.log(photo.title);
  });
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x662F;&#x5411;Flickr API&#x53D1;&#x51FA;&#x56FE;&#x7247;&#x8BF7;&#x6C42;&#x7684;&#x4F8B;&#x5B50;&#x3002;</p>
<p>Request&#x5BF9;&#x8C61;&#x7684;&#x4E00;&#x4E2A;&#x5F88;&#x6709;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x662F;&#x5728;&#x5176;&#x4ED6;Request&#x5B9E;&#x4F8B;&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x751F;&#x6210;&#x65B0;&#x7684;Request&#x5B9E;&#x4F8B;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> postReq = <span class="hljs-keyword">new</span> Request(req, {method: <span class="hljs-string">&apos;POST&apos;</span>});
</code></pre>
<h3 id="t34Response">Response <a href="#t34Response"> # </a></h3>
<p>fetch&#x65B9;&#x6CD5;&#x8FD4;&#x56DE;Response&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#xFF0C;&#x5B83;&#x6709;&#x4EE5;&#x4E0B;&#x5C5E;&#x6027;&#x3002;</p>
<ul>
<li><code>status</code>&#xFF1A;&#x6574;&#x6570;&#x503C;&#xFF0C;&#x8868;&#x793A;&#x72B6;&#x6001;&#x7801;&#xFF08;&#x6BD4;&#x5982;200&#xFF09;</li>
<li>statusText&#xFF1A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8868;&#x793A;&#x72B6;&#x6001;&#x4FE1;&#x606F;&#xFF0C;&#x9ED8;&#x8BA4;&#x662F;&#x201C;OK&#x201D;</li>
<li>ok&#xFF1A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x8868;&#x793A;&#x72B6;&#x6001;&#x7801;&#x662F;&#x5426;&#x5728;200-299&#x7684;&#x8303;&#x56F4;&#x5185;</li>
<li>headers&#xFF1A;Headers&#x5BF9;&#x8C61;&#xFF0C;&#x8868;&#x793A;HTTP&#x56DE;&#x5E94;&#x7684;&#x5934;&#x4FE1;&#x606F;</li>
<li>url&#xFF1A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x8868;&#x793A;HTTP&#x8BF7;&#x6C42;&#x7684;&#x7F51;&#x5740;</li>
<li>type&#xFF1A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x5408;&#x6CD5;&#x7684;&#x503C;&#x6709;&#x4E94;&#x4E2A;basic&#x3001;cors&#x3001;default&#x3001;error&#x3001;opaque&#x3002;basic&#x8868;&#x793A;&#x6B63;&#x5E38;&#x7684;&#x540C;&#x57DF;&#x8BF7;&#x6C42;&#xFF1B;cors&#x8868;&#x793A;CORS&#x673A;&#x5236;&#x7684;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#xFF1B;error&#x8868;&#x793A;&#x7F51;&#x7EDC;&#x51FA;&#x9519;&#xFF0C;&#x65E0;&#x6CD5;&#x53D6;&#x5F97;&#x4FE1;&#x606F;&#xFF0C;status&#x5C5E;&#x6027;&#x4E3A;0&#xFF0C;headers&#x5C5E;&#x6027;&#x4E3A;&#x7A7A;&#xFF0C;&#x5E76;&#x4E14;&#x5BFC;&#x81F4;fetch&#x51FD;&#x6570;&#x8FD4;&#x56DE;Promise&#x5BF9;&#x8C61;&#x88AB;&#x62D2;&#x7EDD;&#xFF1B;opaque&#x8868;&#x793A;&#x975E;CORS&#x673A;&#x5236;&#x7684;&#x8DE8;&#x57DF;&#x8BF7;&#x6C42;&#xFF0C;&#x53D7;&#x5230;&#x4E25;&#x683C;&#x9650;&#x5236;&#x3002;</li>
</ul>
<p>Response&#x5BF9;&#x8C61;&#x8FD8;&#x6709;&#x4E24;&#x4E2A;&#x9759;&#x6001;&#x65B9;&#x6CD5;&#x3002;</p>
<ul>
<li>Response.error() &#x8FD4;&#x56DE;&#x4E00;&#x4E2A;type&#x5C5E;&#x6027;&#x4E3A;error&#x7684;Response&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;</li>
<li>Response.redirect(url, status) &#x8FD4;&#x56DE;&#x7684;Response&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x4F1A;&#x91CD;&#x5B9A;&#x5411;&#x5230;&#x53E6;&#x4E00;&#x4E2A;URL</li>
</ul>
<pre><code class="lang-javascript">fetch(<span class="hljs-string">&quot;https://example.com&quot;</span>, init)
.then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">response</span>) </span>{
<span class="hljs-comment">// Check that the response is a 200</span>
  <span class="hljs-keyword">if</span> (response.status === <span class="hljs-number">200</span>) {
    alert(<span class="hljs-string">&quot;Content type: &quot;</span> + response.headers.get(<span class="hljs-string">&apos;Content-Type&apos;</span>));
  }
});
</code></pre>
<h3 id="t35body&#x5C5E;&#x6027;">body&#x5C5E;&#x6027; <a href="#t35body&#x5C5E;&#x6027;"> # </a></h3>
<p>Request&#x5BF9;&#x8C61;&#x548C;Response&#x5BF9;&#x8C61;&#x90FD;&#x6709;body&#x5C5E;&#x6027;&#xFF0C;&#x8868;&#x793A;&#x8BF7;&#x6C42;&#x7684;&#x5185;&#x5BB9;&#x3002;body&#x5C5E;&#x6027;&#x53EF;&#x80FD;&#x662F;&#x4EE5;&#x4E0B;&#x7684;&#x6570;&#x636E;&#x7C7B;&#x578B;&#x3002;</p>
<ul>
<li>ArrayBuffer</li>
<li>ArrayBufferView (Uint8Array&#x7B49;)</li>
<li>Blob/File</li>
<li>string</li>
<li>URLSearchParams</li>
<li>FormData</li>
</ul>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> form = <span class="hljs-keyword">new</span> FormData(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&apos;login-form&apos;</span>));
fetch(<span class="hljs-string">&quot;/login&quot;</span>, {
  method: <span class="hljs-string">&quot;POST&quot;</span>,
  body: form
})
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;Request&#x5BF9;&#x8C61;&#x7684;body&#x5C5E;&#x6027;&#x4E3A;&#x8868;&#x5355;&#x6570;&#x636E;&#x3002;</p>
<p>Request&#x5BF9;&#x8C61;&#x548C;Response&#x5BF9;&#x8C61;&#x90FD;&#x63D0;&#x4F9B;&#x4EE5;&#x4E0B;&#x65B9;&#x6CD5;&#xFF0C;&#x7528;&#x6765;&#x8BFB;&#x53D6;body&#x3002;</p>
<ul>
<li>arrayBuffer()</li>
<li>blob()</li>
<li>json()</li>
<li>text()</li>
<li>formData()</li>
</ul>
<p>&#x6CE8;&#x610F;&#xFF0C;&#x4E0A;&#x9762;&#x8FD9;&#x4E9B;&#x65B9;&#x6CD5;&#x90FD;&#x53EA;&#x80FD;&#x4F7F;&#x7528;&#x4E00;&#x6B21;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x4F7F;&#x7528;&#x5C31;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;body&#x5C5E;&#x6027;&#x53EA;&#x80FD;&#x8BFB;&#x53D6;&#x4E00;&#x6B21;&#x3002;Request&#x5BF9;&#x8C61;&#x548C;Response&#x5BF9;&#x8C61;&#x90FD;&#x6709;bodyUsed&#x5C5E;&#x6027;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x5E03;&#x5C14;&#x503C;&#xFF0C;&#x8868;&#x793A;body&#x662F;&#x5426;&#x88AB;&#x8BFB;&#x53D6;&#x8FC7;&#x3002;</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> res = <span class="hljs-keyword">new</span> Response(<span class="hljs-string">&quot;one time use&quot;</span>);
<span class="hljs-built_in">console</span>.log(res.bodyUsed); <span class="hljs-comment">// false</span>
res.text().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
  <span class="hljs-built_in">console</span>.log(res.bodyUsed); <span class="hljs-comment">// true</span>
});
<span class="hljs-built_in">console</span>.log(res.bodyUsed); <span class="hljs-comment">// true</span>

res.text().catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;Tried to read already consumed Response&quot;</span>);
});
</code></pre>
<p>&#x4E0A;&#x9762;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x7B2C;&#x4E8C;&#x6B21;&#x901A;&#x8FC7;text&#x65B9;&#x6CD5;&#x8BFB;&#x53D6;Response&#x5BF9;&#x8C61;&#x5B9E;&#x4F8B;&#x7684;body&#x65F6;&#xFF0C;&#x5C31;&#x4F1A;&#x62A5;&#x9519;&#x3002;</p>
<p>&#x8FD9;&#x662F;&#x56E0;&#x4E3A;body&#x5C5E;&#x6027;&#x662F;&#x4E00;&#x4E2A;stream&#x5BF9;&#x8C61;&#xFF0C;&#x6570;&#x636E;&#x53EA;&#x80FD;&#x5355;&#x5411;&#x4F20;&#x9001;&#x4E00;&#x6B21;&#x3002;&#x8FD9;&#x6837;&#x7684;&#x8BBE;&#x8BA1;&#x662F;&#x4E3A;&#x4E86;&#x5141;&#x8BB8;JavaScript&#x5904;&#x7406;&#x89C6;&#x9891;&#x3001;&#x97F3;&#x9891;&#x8FD9;&#x6837;&#x7684;&#x5927;&#x578B;&#x6587;&#x4EF6;&#x3002;</p>
<p>&#x5982;&#x679C;&#x5E0C;&#x671B;&#x591A;&#x6B21;&#x4F7F;&#x7528;body&#x5C5E;&#x6027;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Response&#x5BF9;&#x8C61;&#x548C;Request&#x5BF9;&#x8C61;&#x7684;clone&#x65B9;&#x6CD5;&#x3002;&#x5B83;&#x5FC5;&#x987B;&#x5728;body&#x8FD8;&#x6CA1;&#x6709;&#x8BFB;&#x53D6;&#x524D;&#x8C03;&#x7528;&#xFF0C;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x65B0;&#x7684;body&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x51E0;&#x6B21;body&#xFF0C;&#x5C31;&#x8981;&#x8C03;&#x7528;&#x51E0;&#x6B21;clone&#x65B9;&#x6CD5;&#x3002;</p>
<pre><code class="lang-javascript">addEventListener(<span class="hljs-string">&apos;fetch&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">evt</span>) </span>{
  <span class="hljs-keyword">var</span> sheep = <span class="hljs-keyword">new</span> Response(<span class="hljs-string">&quot;Dolly&quot;</span>);
  <span class="hljs-built_in">console</span>.log(sheep.bodyUsed); <span class="hljs-comment">// false</span>
  <span class="hljs-keyword">var</span> clone = sheep.clone();
  <span class="hljs-built_in">console</span>.log(clone.bodyUsed); <span class="hljs-comment">// false</span>

  clone.text();
  <span class="hljs-built_in">console</span>.log(sheep.bodyUsed); <span class="hljs-comment">// false</span>
  <span class="hljs-built_in">console</span>.log(clone.bodyUsed); <span class="hljs-comment">// true</span>

  evt.respondWith(cache.add(sheep.clone()).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">return</span> sheep;
  });
});
</code></pre>
<h2 id="t36&#x53C2;&#x8003;&#x94FE;&#x63A5;">&#x53C2;&#x8003;&#x94FE;&#x63A5; <a href="#t36&#x53C2;&#x8003;&#x94FE;&#x63A5;"> # </a></h2>
<ul>
<li>MDN, <a href="https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest">Using XMLHttpRequest</a></li>
<li>Mathias Bynens, <a href="http://mathiasbynens.be/notes/xhr-responsetype-json">Loading JSON-formatted data with Ajax and xhr.responseType=&apos;json&apos;</a></li>
<li>Eric Bidelman, <a href="http://www.html5rocks.com/en/tutorials/file/xhr2/">New Tricks in XMLHttpRequest2</a></li>
<li><p>Matt West, <a href="http://blog.teamtreehouse.com/uploading-files-ajax">Uploading Files with AJAX</a></p>
</li>
<li><p>Matt Gaunt, <a href="http://updates.html5rocks.com/2015/03/introduction-to-fetch">Introduction to fetch()</a></p>
</li>
<li>Nikhil Marathe, <a href="https://hacks.mozilla.org/2015/03/this-api-is-so-fetching/">This API is so Fetching!</a></li>
<li>Ludovico Fischer, <a href="http://www.sitepoint.com/introduction-to-the-fetch-api/">Introduction to the Fetch API</a></li>
</ul>

        <div class="copyright">Created by <a href="https://github.com/shenbao" target="_blank">ShenBao</a></div>
    </div>

</div>


</body>

<script>
		(function(window,document,undefined){
			var hearts = [];
			window.requestAnimationFrame = (function(){
					return window.requestAnimationFrame || 
							   window.webkitRequestAnimationFrame ||
							   window.mozRequestAnimationFrame ||
							   window.oRequestAnimationFrame ||
							   window.msRequestAnimationFrame ||
							   function (callback){
									   setTimeout(callback,1000/60);
							   }
			})();
			init();
			function init(){
					css(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}");
					attachEvent();
					gameloop();
			}
			function gameloop(){
					for(var i=0;i<hearts.length;i++){
						if(hearts[i].alpha <=0){
								document.body.removeChild(hearts[i].el);
								hearts.splice(i,1);
								continue;
						}
						hearts[i].y--;
						hearts[i].scale += 0.004;
						hearts[i].alpha -= 0.013;
						hearts[i].el.style.cssText = "left:"+hearts[i].x+"px;top:"+hearts[i].y+"px;opacity:"+hearts[i].alpha+";transform:scale("+hearts[i].scale+","+hearts[i].scale+") rotate(45deg);background:"+hearts[i].color+";z-index:99999";
				}
				requestAnimationFrame(gameloop);
			}
			function attachEvent(){
					var old = typeof window.onclick==="function" && window.onclick;
					window.onclick = function(event){
							old && old();
							createHeart(event);
					}
			}
			function createHeart(event){
				var d = document.createElement("div");
				d.className = "heart";
				hearts.push({
						el : d,
						x : event.clientX - 5,
						y : event.clientY - 5,
						scale : 1,
						alpha : 1,
						color : randomColor()
				});
				document.body.appendChild(d);
		}
		function css(css){
				var style = document.createElement("style");
					style.type="text/css";
					try{
						style.appendChild(document.createTextNode(css));
					}catch(ex){
						style.styleSheet.cssText = css;
					}
					document.getElementsByTagName('head')[0].appendChild(style);
		}
			function randomColor(){
					return "rgb("+(~~(Math.random()*255))+","+(~~(Math.random()*255))+","+(~~(Math.random()*255))+")";
			}
	})(window,document);
</script>

</html>
